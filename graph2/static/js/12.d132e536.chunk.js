(this.webpackJsonpvsa=this.webpackJsonpvsa||[]).push([[12],{688:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(24),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",n=e.split(t),r=Object(a.a)(n,2),o=r[0],i=r[1],c=o.split("."),l=Object(a.a)(c,3),s=l[0],u=l[1],p=l[2];return new Date("".concat(p,"-").concat(u,"-").concat(s," ").concat(i," UTC")).toLocaleString("ru-RU").replace(",","")}},802:function(e,t,n){e.exports={list:"List_list__2X7sh",item:"List_item__12kMR",separateLine:"List_separateLine__18Eg6"}},803:function(e,t,n){e.exports={wrapper:"ListItem_wrapper__M7o1r",name:"ListItem_name__2_2n1",updated:"ListItem_updated__3DFch",status:"ListItem_status__2KoZ8",checkNumber:"ListItem_checkNumber__1hD1_",actions:"ListItem_actions__mwlnA",action:"ListItem_action__2Kfkx",actionDisabled:"ListItem_actionDisabled__urG-g",editContainer:"ListItem_editContainer__3pmRa",input:"ListItem_input__3zLzr",close:"ListItem_close__2HDrV",button:"ListItem_button__2ecp9",openSchemeIcon:"ListItem_openSchemeIcon__2KnBK",contextMenuIcon:"ListItem_contextMenuIcon__2f7JO",contextMenu:"ListItem_contextMenu__2Dyux",contextMenuItem:"ListItem_contextMenuItem__1b7py"}},804:function(e,t,n){e.exports={search:"UserGraphs_search__ApNh_",headerFixed:"UserGraphs_headerFixed__2GIfQ",headerSearch:"UserGraphs_headerSearch__gsRFC",paginationWrapper:"UserGraphs_paginationWrapper__2sUhi",pagination:"UserGraphs_pagination__6vcfq",total:"UserGraphs_total__11xpF"}},987:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(10),o=n(15),i=n(14),c=n(9),l=n(0),s=n.n(l),u=n(84),p=n(4),h=n.n(p),m=n(7),d=n(802),f=n.n(d),v=n(5),_=n(803),g=n.n(_);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var b=l.createElement("path",{d:"M12.728 6.68602L11.314 5.27202L2 14.586V16H3.414L12.728 6.68602ZM14.142 5.27202L15.556 3.85802L14.142 2.44402L12.728 3.85802L14.142 5.27202ZM4.242 18H0V13.757L13.435 0.322022C13.6225 0.134551 13.8768 0.0292358 14.142 0.0292358C14.4072 0.0292358 14.6615 0.134551 14.849 0.322022L17.678 3.15102C17.8655 3.33855 17.9708 3.59286 17.9708 3.85802C17.9708 4.12319 17.8655 4.37749 17.678 4.56502L4.243 18H4.242Z",fill:"#313131"});function w(e,t){var n=e.title,a=e.titleId,r=S(e,["title","titleId"]);return l.createElement("svg",C({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?l.createElement("title",{id:a},n):null,b)}var O=l.forwardRef(w);n.p;function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var x=l.createElement("path",{d:"M15 4H20V6H18V19C18 19.2652 17.8946 19.5196 17.7071 19.7071C17.5196 19.8946 17.2652 20 17 20H3C2.73478 20 2.48043 19.8946 2.29289 19.7071C2.10536 19.5196 2 19.2652 2 19V6H0V4H5V1C5 0.734784 5.10536 0.48043 5.29289 0.292893C5.48043 0.105357 5.73478 0 6 0H14C14.2652 0 14.5196 0.105357 14.7071 0.292893C14.8946 0.48043 15 0.734784 15 1V4ZM16 6H4V18H16V6ZM7 9H9V15H7V9ZM11 9H13V15H11V9ZM7 2V4H13V2H7Z",fill:"#313131"});function j(e,t){var n=e.title,a=e.titleId,r=y(e,["title","titleId"]);return l.createElement("svg",E({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?l.createElement("title",{id:a},n):null,x)}var I=l.forwardRef(j);n.p;function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var L=l.createElement("path",{d:"M16 0.5C17.657 0.5 19 1.843 19 3.5C19 5.157 17.657 6.5 16 6.5H13C11.694 6.5 10.583 5.666 10.171 4.5H9C7.9 4.5 7 5.4 7 6.5V6.671C8.166 7.083 9 8.194 9 9.5C9 10.806 8.166 11.917 7 12.329V12.5C7 13.6 7.9 14.5 9 14.5H10.17C10.582 13.335 11.694 12.5 13 12.5H16C17.657 12.5 19 13.843 19 15.5C19 17.157 17.657 18.5 16 18.5H13C11.694 18.5 10.583 17.666 10.171 16.5H9C6.79 16.5 5 14.71 5 12.5H3C1.343 12.5 0 11.157 0 9.5C0 7.843 1.343 6.5 3 6.5H5C5 4.29 6.79 2.5 9 2.5H10.17C10.582 1.335 11.694 0.5 13 0.5H16ZM16 14.5H13C12.448 14.5 12 14.948 12 15.5C12 16.052 12.448 16.5 13 16.5H16C16.552 16.5 17 16.052 17 15.5C17 14.948 16.552 14.5 16 14.5ZM6 8.5H3C2.448 8.5 2 8.948 2 9.5C2 10.052 2.448 10.5 3 10.5H6C6.552 10.5 7 10.052 7 9.5C7 8.948 6.552 8.5 6 8.5ZM16 2.5H13C12.448 2.5 12 2.948 12 3.5C12 4.052 12.448 4.5 13 4.5H16C16.552 4.5 17 4.052 17 3.5C17 2.948 16.552 2.5 16 2.5Z",fill:"#0B346A"});function H(e,t){var n=e.title,a=e.titleId,r=k(e,["title","titleId"]);return l.createElement("svg",M({width:19,height:19,viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?l.createElement("title",{id:a},n):null,L)}var G=l.forwardRef(H);n.p;function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var V=l.createElement("path",{d:"M2 0.5C0.9 0.5 0 1.4 0 2.5C0 3.6 0.9 4.5 2 4.5C3.1 4.5 4 3.6 4 2.5C4 1.4 3.1 0.5 2 0.5ZM2 14.5C0.9 14.5 0 15.4 0 16.5C0 17.6 0.9 18.5 2 18.5C3.1 18.5 4 17.6 4 16.5C4 15.4 3.1 14.5 2 14.5ZM2 7.5C0.9 7.5 0 8.4 0 9.5C0 10.6 0.9 11.5 2 11.5C3.1 11.5 4 10.6 4 9.5C4 8.4 3.1 7.5 2 7.5Z",fill:"#969696"});function R(e,t){var n=e.title,a=e.titleId,r=P(e,["title","titleId"]);return l.createElement("svg",N({width:4,height:19,viewBox:"0 0 4 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},r),n?l.createElement("title",{id:a},n):null,V)}var D,Z,U,F,B,W=l.forwardRef(R),A=(n.p,n(21)),K=n(168),T=n(688),J=Object(c.c)("uiStore")(D=Object(c.d)((U=Z=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).inputRef=Object(l.createRef)(),r.contextMenuRef=Object(l.createRef)(),r._onClick=function(e){var t,n,a=r.state.isShowContextMenu;(null===(t=r.inputRef.current)||void 0===t?void 0:t.contains(e.target))||r._onEditEnd(),!(null===(n=r.contextMenuRef.current)||void 0===n?void 0:n.contains(e.target))&&a&&r.setState({isShowContextMenu:!1})},r._handleClick=function(){var e=r.props.uiStore.toggleMenuState,t=Object(v.a)(r),n=t.props,a=n.onClick,o=n.item;t.state.editing||a(o.graph_id),e()},r._onChange=function(e){r.setState({value:e.target.value})},r._onEdit=function(e){e.preventDefault();var t=Object(v.a)(r),n=t.props,a=n.onEdit,o=n.item,i=t.state.value;a(o.graph_id,i),r._onEditEnd()},r._onEditStart=function(e){e.stopPropagation(),r.setState({editing:!0,isShowContextMenu:!1})},r._onEditEnd=function(){r.setState({editing:!1})},r._onReset=function(e){e.stopPropagation(),r.setState({value:""})},r._onDelete=function(e){e.stopPropagation(),r.setState({isShowContextMenu:!1});var t=r.props;(0,t.onDelete)(t.item.graph_id)},r.showContextMenu=function(e){var t=r.state,n=t.isShowContextMenu;t.topCoordinate;r.setState({topCoordinate:e.offsetY+"px"}),r.setState({isShowContextMenu:!n})},r.state={value:e.item.name||"",editing:!1,isShowContextMenu:!1,topCoordinate:""},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("click",(function(t){return e._onClick(t)}))}},{key:"componentWillUnmount",value:function(){var e=this;window.removeEventListener("click",(function(t){return e._onClick(t)}))}},{key:"render",value:function(){var e=this.props,t=e.item,n=(e.pending,e.theme),a=e.isShowDelete,r=e.isShowEdit,o=this.state,i=o.value,c=o.editing,l=o.isShowContextMenu,u=o.topCoordinate;return s.a.createElement("div",{className:g.a.wrapper},c?s.a.createElement("form",{className:g.a.editContainer,onSubmit:this._onEdit},s.a.createElement("input",{autoFocus:!0,ref:this.inputRef,type:"text",className:"".concat(g.a.name," ").concat(g.a.input),value:i,onChange:this._onChange}),s.a.createElement(A.b,{name:"close",className:g.a.close,onClick:this._onReset,theme:n})):s.a.createElement("span",{className:g.a.name},t.name||""),s.a.createElement("span",{className:g.a.updated},t.updated?Object(T.a)(t.updated):""),s.a.createElement(K.a,{buttonStyle:g.a.button,label:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u0445\u0435\u043c\u0443",onClick:this._handleClick,icon:s.a.createElement(G,{className:g.a.openSchemeIcon}),isFrontIcon:!0}),s.a.createElement("div",{className:g.a.actions,onClick:this.showContextMenu,ref:this.contextMenuRef,id:t.name},s.a.createElement(W,{className:g.a.contextMenuIcon}),l&&s.a.createElement("div",{className:g.a.contextMenu,style:{top:u}},r&&s.a.createElement("div",{className:g.a.contextMenuItem,onClick:this._onEditStart},s.a.createElement(O,{className:"".concat(g.a.action," ").concat(g.a.edit),title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u0445\u0435\u043c\u044b"}),s.a.createElement("span",null,"\u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u0442\u044c")),a&&s.a.createElement("div",{className:g.a.contextMenuItem,onClick:this._onDelete},s.a.createElement(I,{className:"".concat(g.a.action," ").concat(g.a.delete),title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0445\u0435\u043c\u044b"}),s.a.createElement("span",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))))}}]),n}(l.PureComponent),Z.defaultProps={pending:!1},D=U))||D)||D,z=Object(c.c)("userGraphsStore","graphStore","filterStore","commonStore","diagramStore","indicatorsStore","clusterStore")(F=Object(c.d)(F=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o)))._onDelete=function(t){var n=e.props,a=n.userGraphsStore,r=n.diagramStore,o=n.graphStore,i=n.onSearch;(null===a||void 0===a?void 0:a.pending)||a.deleteGraph(t).then((function(){var e;o.previouslyGraphId===t&&(null===r||void 0===r||null===(e=r.diagram)||void 0===e||e.clear(),o.deleteSchemeInfo());i&&i(),null===a||void 0===a||a.fetchUserGraphs()}))},e._onEditName=function(){var t=Object(m.a)(h.a.mark((function t(n,a){var r,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,o=r.graphStore,i=r.userGraphsStore,o.editGraph(n,{name:a}),i.renameGraph(n,a);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e._onOpenGraph=function(){var t=Object(m.a)(h.a.mark((function t(n){var a,r,o,i,c,l,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,r=a.graphStore,o=a.onClose,i=a.filterStore,c=a.indicatorsStore,l=a.clusterStore,null===(s=a.commonStore)||void 0===s||s.closeBeginningWork(),t.prev=2,!r.showFilters){t.next=6;break}return t.next=6,null===i||void 0===i?void 0:i.getGraphFilters();case 6:return null===c||void 0===c||c.showAllFilters(),null===c||void 0===c||c.filter(),null===l||void 0===l||l.setFilterClusterFalse(),t.next=11,r.fetchGraph(n);case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(2);case 15:return t.prev=15,o&&o(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,13,15,18]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.userGraphsStore,a=t.commonStore,r=t.graphStore,o=n.userGraphs;return s.a.createElement("ul",{className:f.a.list},o.map((function(t,o){return s.a.createElement("li",{key:"graph-list-item"+o,className:f.a.item},s.a.createElement(J,{item:t,onDelete:e._onDelete,onEdit:e._onEditName,onClick:e._onOpenGraph,pending:n.pending,theme:null===a||void 0===a?void 0:a.appTheme,isShowDelete:(null===r||void 0===r?void 0:r.showDeleteGraph)&&(null===r||void 0===r?void 0:r.showCreateGraph),isShowEdit:null===r||void 0===r?void 0:r.showCreateGraph}))})))}}]),n}(l.PureComponent))||F)||F,q=n(115),Q=n(44),X=n(91),Y=n(19),$=n(804),ee=n.n($),te=Object(c.c)("userGraphsStore","commonStore","modalStore")(B=Object(c.d)(B=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={searchValue:""},e._onSearch=function(){var t=e.state.searchValue;e.props.userGraphsStore.search(t)},e._onChange=function(t){e.setState({searchValue:t})},e._onReset=function(){var t=e.props.userGraphsStore;e._onChange(""),t.resetSearch(),t.resetPagination()},e._onSave=function(){},e._onCancel=function(){},e._onClose=function(){var t=e.props,n=t.modalStore,a=t.userGraphsStore;n.closeModal(Y.w),a.resetSearch(),a.resetSort(),a.hideGraphsList()},e.createNewScheme=function(){var t=e.props.commonStore;e._onClose(),null===t||void 0===t||t.setIsShowBeginningWork()},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.props.userGraphsStore.fetchUserGraphs()}},{key:"componentWillUnmount",value:function(){this._onReset()}},{key:"render",value:function(){var e=this.props,t=e.commonStore,n=e.userGraphsStore,a=this.state.searchValue,r=n,o=r.filteredUserGraphs,i=r.pagination,c=r.changePagination,l=i.page*i.count+1,p=(i.page+1)*i.count;return s.a.createElement(X.a,null,s.a.createElement(X.d,{onClose:this._onClose},"\u041c\u043e\u0438 \u0441\u0445\u0435\u043c\u044b"),s.a.createElement(X.e,null,s.a.createElement("div",{className:ee.a.headerSearch},s.a.createElement(u.a,{wrapperStyle:ee.a.search,onSearch:this._onSearch,onChange:this._onChange,onReset:this._onReset,autoSearchTimeout:1,value:a,withSearchIcon:!0,placeholder:"\u041d\u0430\u0439\u0442\u0438 \u0441\u0445\u0435\u043c\u0443",theme:null===t||void 0===t?void 0:t.appTheme}),s.a.createElement(Q.a,{onClick:this.createNewScheme},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0441\u0445\u0435\u043c\u0443"))),s.a.createElement(X.b,{withFooter:!0,withHeader:!0},s.a.createElement(z,{onClose:this._onClose,onSearch:this._onSearch})),s.a.createElement(X.c,null,s.a.createElement("div",{className:ee.a.paginationWrapper},s.a.createElement("span",{className:ee.a.total},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b: \u0441 ".concat(l," \u043f\u043e ").concat(p>i.total?i.total:p," \u0438\u0437 ").concat(o.length)),s.a.createElement(q.Pagination,{className:ee.a.pagination,pagination:i,showPerPageOptions:!0,onChange:function(e){return c(e)}}))))}}]),n}(l.PureComponent))||B)||B;n.d(t,"default",(function(){return te}))}}]);
//# sourceMappingURL=12.d132e536.chunk.js.map