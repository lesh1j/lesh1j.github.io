{"version":3,"sources":["components/modals/DetailedGroup/components/CheckboxIcon.tsx","components/modals/DetailedGroup/components/TableData/TableData.module.scss","components/modals/DetailedGroup/components/CheckboxIconDark.tsx","components/modals/DetailedGroup/DetailedGroup.module.scss","components/modals/DetailedGroup/components/FiltersRow/FiltersRow.module.scss","components/modals/DetailedGroup/components/RangeFilter/RangeFilter.module.scss","components/modals/DetailedGroup/components/RoleFilter/RoleFilter.module.scss","components/modals/DetailedGroup/components/TextFilter/TextFilter.module.scss","components/modals/DetailedGroup/assets/close.svg","utils/ui/formatMoneyDetailedGroup.ts","components/modals/DetailedGroup/components/TableData/utils.ts","components/modals/DetailedGroup/components/FiltersRow/FiltersRow.tsx","components/modals/DetailedGroup/assets/edit.svg","components/modals/DetailedGroup/assets/filter.svg","utils/ui/range.ts","components/modals/DetailedGroup/components/RangeFilter/RangeFilter.tsx","components/modals/DetailedGroup/components/RoleFilter/RoleFilter.tsx","components/modals/DetailedGroup/components/TextFilter/TextFilter.tsx","components/modals/DetailedGroup/components/TableData/TableData.tsx","components/modals/DetailedGroup/DetailedGroup.tsx","components/modals/DetailedGroup/index.ts"],"names":["CheckboxIcon","selected","someSelected","disabled","width","height","viewBox","fill","xmlns","x","y","rx","stroke","transform","d","module","exports","CheckboxIconDark","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","strokeWidth","strokeLinecap","SvgClose","_ref","svgRef","title","titleId","props","ref","id","ForwardRef","formatMoneyDetailedGroup","amount","currency","replace","options","style","maximumFractionDigits","minimumFractionDigits","numberFormat","Intl","NumberFormat","format","briefToIcon","Map","icons","tz_kao","beneficiary_kao","transit_kao","buyer","seller","one_day_company","beneficiary","transit","pl_ir","pl_transit","pl_pvp","pl_vgp","vgp_seller","kz","tkp","difference11","diffAfterKnp","control","isDebt","SF2015","KVO17","KVO23","KVO45","split","vat_gap","debt","journal","roleNameMap","surFilter","color","name","brief","role_id","indicatorsNameMap","indicatorsFilter","icon","exceptionsIndicators","FiltersRow","observer","groupFilter","onChange","useStores","commonStore","getAnalyticalRoleById","getBusinessRoleById","className","styles","container","entries","map","value","valuesArr","indicators","role","roleIcon","roleName","filterTag","src","encodeURIComponent","alt","crossIcon","onClick","filter","item","sur","surItem","find","tableStyles","round","inn","indicator","ook_from","ook_to","undefined","taxGap_from","taxGap_to","purchases_from","purchases_to","sales_from","sales_to","debet_from","debet_to","credit_from","credit_to","quarter_from","quarter_to","year_from","year_to","vatDeductBuyer_from","vatDeductBuyer_to","vatCalcSeller_from","vatCalcSeller_to","SvgEdit","SvgFilter","range","start","stop","step","Array","from","_","RangeFilter","values","onClose","isPercent","lastClass","type","isYear","periodDataFilter","nds3_period_from","nds3_period_to","groupDetailStore","params","getPeriodNumbers","yearFrom","year","quarterFrom","quarter","yearTo","quarterTo","years","toString","startQuarter","Number","endQuarter","fromQuarters","toQuarters","useRef","handleClickOutside","e","current","composedPath","includes","handleEnter","useEffect","document","addEventListener","removeEventListener","placeholder","currentTarget","autoFocus","Dropdown","dropdownStyle","dropdown","containerStyle","rightContainer","items","onSelect","isPeriod","dash","to","RoleFilter","roles","checked","iconSize","isSelected","listItem","data-selected","Icon","data-size","TextFilter","label","TableData","inject","_editNode","orig_id","subject_type","a","modalStore","groupID","openModal","MODAL_DETAILED_INDIVIDUAL_PERSON","isShow","is_from_group","DETAILED_NODE_MODAL","err","console","warn","message","onFilterChange","setState","businessRoles","order","businessRolesIcons","analyticalRoles","used_in_vsa","analyticalRolesIcons","setFilterField","openedFilterField","state","onMainCheckbox","onExtractChange","extract","onVirtualExtractChange","virtualExtract","groupData","isVirtual","arrayItems","every","element","some","fid","prevProps","pagination","onPaginationChange","category","graphStore","tableMain","table_container","data_table","cellSpacing","cellPadding","data_table_header","data_table_checkbox","appTheme","alignCenter","data-active","integrals","inns","names","bizRoles","alignRight","graphExpandType","commodityFlow","lastFilter","data_table_tbody","index","taxGap","bizRole","SPECIAL_INN","ableEdit","editButton","integral","green","yellow","red","gray","analyticalRole","fullText","get","formatMoney","ookCorrectionSum","isNaN","ind","parseInt","value_months","indicatorsIcons","vatDeductBuyer","vatCalcSeller","vatDeduct","vatCalc","debitSum","creditSum","paginationWrapper","active","buttonActive","select","showFromTo","showPerPageOptions","PureComponent","DetailedGroup","handleChangePagination","changePage","_outOfGroup","fetchOutOfGroupVirtual","fetchOutOfGroup","closeModal","MODAL_DETAILED_GROUP","_ungroupGroup","nodeOutOfGroup","fetchGraph","log","page","fetchDetailedGroup","resetStore","theme","changeExtract","changeVirtualExtract","resetParams","changeFilter","groupDetails","groupDetailedData","total","groupDetailedDataTotal","filtered","isArray","Modal","modal","body","filterRow","visibleNodes","Button","resetFilter","size","filterCross","pending","count","pageSize","footer","mode"],"mappings":"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","file":"static/js/11.34098e00.chunk.js","sourcesContent":["import React, { DetailedHTMLProps, SVGAttributes } from 'react';\r\n\r\nexport const CheckboxIcon = ({\r\n  selected,\r\n  someSelected,\r\n  disabled,\r\n}: { selected?: boolean; someSelected?: boolean; disabled?: boolean } & DetailedHTMLProps<\r\n  SVGAttributes<SVGSVGElement>,\r\n  SVGSVGElement\r\n>) => (\r\n  <svg\r\n    width=\"18px\"\r\n    height=\"18px\"\r\n    viewBox=\"0 0 18 18\"\r\n    fill=\"none\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n  >\r\n    <rect\r\n      x=\"1\"\r\n      y=\"1\"\r\n      width=\"16\"\r\n      height=\"16\"\r\n      rx=\"2\"\r\n      stroke={disabled || (!selected && !someSelected) ? '#CCCCCC' : '#0B346A'}\r\n    />\r\n    <rect\r\n      x=\"1\"\r\n      y=\"1\"\r\n      width=\"16\"\r\n      height=\"16\"\r\n      rx=\"2\"\r\n      fill={disabled ? '#E6E6E6' : selected || someSelected ? '#0B346A' : 'white'}\r\n    />\r\n    {selected && (\r\n      <path\r\n        transform=\"translate(5, 6)\"\r\n        d=\"M0 3.11207L3.22831 6L8 1.03736L6.79746 0L3.09553 3.8027L1.05729 1.95855L0 3.11207Z\"\r\n        fill=\"white\"\r\n      />\r\n    )}\r\n    {someSelected && <rect x=\"5\" y=\"8\" width=\"8\" height=\"2\" fill=\"white\" />}\r\n  </svg>\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tableMain\":\"TableData_tableMain__2Lp0z\",\"table_container\":\"TableData_table_container__3fVSj\",\"data_table\":\"TableData_data_table__155qG\",\"data_table_header\":\"TableData_data_table_header__pGGjE\",\"data_table_tbody\":\"TableData_data_table_tbody__Wlx0c\",\"indicators\":\"TableData_indicators__f7Ozn\",\"data_table_checkbox\":\"TableData_data_table_checkbox__2sUES\",\"paginationWrapper\":\"TableData_paginationWrapper__3Et8F\",\"active\":\"TableData_active__2WNSO\",\"pagination\":\"TableData_pagination__r7AZQ\",\"total\":\"TableData_total__EGF_f\",\"buttonActive\":\"TableData_buttonActive__1JVPN\",\"select\":\"TableData_select__A651-\",\"checked\":\"TableData_checked__25BKc\",\"alignRight\":\"TableData_alignRight__DMGIu\",\"alignCenter\":\"TableData_alignCenter__C5SN7\",\"editButton\":\"TableData_editButton__xONea\",\"fullText\":\"TableData_fullText__16Qkb\",\"indicatorsIcons\":\"TableData_indicatorsIcons__Kvxtu\",\"round\":\"TableData_round__v9lDh\",\"green\":\"TableData_green__33z71\",\"yellow\":\"TableData_yellow__h7CMf\",\"red\":\"TableData_red__2zGWm\",\"gray\":\"TableData_gray__2UhTk\",\"integral\":\"TableData_integral__3VwBT\"};","import React, { DetailedHTMLProps, SVGAttributes } from 'react';\r\n\r\nexport const CheckboxIconDark = ({\r\n  selected,\r\n  someSelected,\r\n}: { selected?: boolean; someSelected?: boolean } & DetailedHTMLProps<\r\n  SVGAttributes<SVGSVGElement>,\r\n  SVGSVGElement\r\n>) => (\r\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 14 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <rect\r\n      x=\"0.5\"\r\n      y=\"0.5\"\r\n      width=\"13\"\r\n      height=\"13\"\r\n      fill={selected || someSelected ? 'white' : 'rgba(49, 49, 49, 1)'}\r\n    />\r\n    {selected && (\r\n      <path\r\n        d=\"M5.95047 8.66519L10.7763 3.83887L11.5191 4.58122L5.95047 10.1499L2.60938 6.80879L3.35173 6.06644L5.95047 8.66519Z\"\r\n        fill=\"rgba(49, 49, 49, 1)\"\r\n      />\r\n    )}\r\n    {someSelected && <rect x=\"3\" y=\"6.5\" width=\"8\" height=\"2\" fill=\"rgba(49, 49, 49, 1)\" />}\r\n    <rect x=\"0.5\" y=\"0.5\" width=\"13\" height=\"13\" stroke=\"white\" />\r\n  </svg>\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"DetailedGroup_modal__3tFsm\",\"body\":\"DetailedGroup_body__1xj4X\",\"loader\":\"DetailedGroup_loader__BC3lI\",\"filterRow\":\"DetailedGroup_filterRow__3sPzX\",\"resetFilter\":\"DetailedGroup_resetFilter__3KEqx\",\"filterCross\":\"DetailedGroup_filterCross__1D-k1\",\"bottomBar\":\"DetailedGroup_bottomBar__3o4a6\",\"footer\":\"DetailedGroup_footer__358Vj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FiltersRow_container__GbQ7T\",\"filterTag\":\"FiltersRow_filterTag__1iFkL\",\"crossIcon\":\"FiltersRow_crossIcon__36pA8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RangeFilter_container__1iNk0\",\"dropdown\":\"RangeFilter_dropdown__1eeE2\",\"dash\":\"RangeFilter_dash__1-Y2i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RoleFilter_container__1cFVF\",\"listItem\":\"RoleFilter_listItem__2gJy3\",\"round\":\"RoleFilter_round__SXOUn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TextFilter_container__xYVpL\"};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1 1L25 25\",\n  stroke: \"#0F3971\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M25 1L1 25\",\n  stroke: \"#0F3971\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\"\n});\n\nfunction SvgClose(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 26,\n    height: 26,\n    viewBox: \"0 0 26 26\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgClose);\nexport default __webpack_public_path__ + \"static/media/close.879e02eb.svg\";\nexport { ForwardRef as ReactComponent };","/**\r\n * Форматирование денежной суммы\r\n */\r\nexport const formatMoneyDetailedGroup = (amount: any, currency: string = 'RUB') => {\r\n  if (typeof amount === 'string') {\r\n    amount = amount.replace(/,/, '.');\r\n  }\r\n  const options = {\r\n    style: 'currency',\r\n    maximumFractionDigits: 0,\r\n    minimumFractionDigits: 0,\r\n    currency,\r\n  };\r\n  const numberFormat = new Intl.NumberFormat('ru-RU', options);\r\n\r\n  return amount ? numberFormat.format(amount) : '...';\r\n  /* if (!amount) {\r\n    return '...';\r\n  } else {\r\n    const str = numberFormat.format(amount);\r\n    const formatedString = str.slice(0, str.length - 1);\r\n\r\n    return formatedString;\r\n  } */\r\n};\r\n","import { icons } from '@fdc/vsa-gojs-lib';\r\n\r\nexport const briefToIcon = new Map([\r\n  ['TZ', icons.tz_kao],\r\n  ['KAO_VGP', icons.beneficiary_kao],\r\n  ['PVP', icons.transit_kao],\r\n  ['PK', icons.buyer],\r\n  ['PR', icons.seller],\r\n  ['OD', icons.one_day_company],\r\n  ['VGP', icons.beneficiary],\r\n  ['TRANSIT', icons.transit],\r\n  ['PL_IR', icons.pl_ir],\r\n  ['PL_TRANSIT', icons.pl_transit],\r\n  ['PL_PVP', icons.pl_pvp],\r\n  ['PL_VGP', icons.pl_vgp],\r\n  ['VGP_SELLER', icons.vgp_seller],\r\n  ['KZ', icons.kz],\r\n  ['TKP', icons.tkp],\r\n  ['Ook_Mis11Amount', icons.difference11],\r\n  ['Ook_MisAfterKnpAmount', icons.diffAfterKnp],\r\n  ['Ook_KsVatAmount', icons.control],\r\n  ['Ook_DoubtfulAmount', icons.isDebt],\r\n  ['Ook_Inv2015Ch8Amount', icons.SF2015],\r\n  ['Ook_Inv2015Ch11Amount', icons.SF2015],\r\n  ['Ook_Oc17Amount', icons.KVO17],\r\n  ['Ook_Oc23Amount', icons.KVO23],\r\n  ['Ook_Oc45Amount', icons.KVO45],\r\n  ['Ook_SplittingAmount', icons.split],\r\n  ['Break_NDS', icons.vat_gap],\r\n  ['Debt', icons.debt],\r\n  ['Ook_JournalsNotInDeclAmount', icons.journal],\r\n  ['Krsb_Indicator', icons.debt],\r\n]);\r\n\r\nexport const roleNameMap = new Map([\r\n  ['TZ', 'Техническое звено (КАО)'],\r\n  ['KAO_VGP', 'Выгодоприобретатель (КАО)'],\r\n  ['PVP', 'Предполагаемый выгодоприобретатель (КАО)'],\r\n  ['PK', 'Покупатель'],\r\n  ['PR', 'Продавец'],\r\n  ['OD', 'Источник расхождения'],\r\n  ['VGP', 'Выгодоприобретатель'],\r\n  ['TRANSIT', 'Транзитная организация'],\r\n  ['PL_IR', 'Площадка. Источник расхождения'],\r\n  ['PL_TRANSIT', 'Площадка. Транзитная организация'],\r\n  ['PL_PVP', 'Площадка. Предполагаемый выгодоприобретатель'],\r\n  ['PL_VGP', 'Площадка. Выгодоприобретатель'],\r\n  ['VGP_SELLER', 'Выгодоприобретатель - продавец'],\r\n  ['KAO_VGP', 'Выгодоприобретатель (КАО)'],\r\n  ['TZ', 'Техническое звено (КАО)'],\r\n  ['TRANSIT_P', 'Транзитная организация - посредник'],\r\n  ['KZ', 'Кабельный завод'],\r\n  ['TKP', 'Техническая компания - переработчик'],\r\n]);\r\n\r\nexport const surFilter = [\r\n  { color: 'green', name: 'Низкий УР АСК НДС-2', brief: 'Low', role_id: 'Low' },\r\n  { color: 'yellow', name: 'Средний УР АСК НДС-2', brief: 'Medium', role_id: 'Medium' },\r\n  { color: 'red', name: 'Высокий УР АСК НДС-2', brief: 'High', role_id: 'High' },\r\n  { color: 'gray', name: 'УР АСК НДС-2 не определен', brief: 'Unknown', role_id: 'Unknown' },\r\n];\r\n\r\nexport const indicatorsNameMap = new Map([\r\n  ['Ook_Mis11Amount', 'Расхождения по разделу 11'],\r\n  ['Ook_MisAfterKnpAmount', 'Расхождения после завершения КНП'],\r\n  ['Ook_KsVatAmount', 'Контрольные соотношения'],\r\n  ['Ook_DoubtfulAmount', 'Сомнительные начисления'],\r\n  ['Ook_Inv2015Ch8Amount', 'СФ до 2015г. в разделе 8'],\r\n  ['Ook_Inv2015Ch11Amount', 'СФ до 2015г. в разделе 11'],\r\n  ['Ook_Oc17Amount', 'КВО 17'],\r\n  ['Ook_Oc23Amount', 'КВО 23'],\r\n  ['Ook_Oc45Amount', 'КВО 45'],\r\n  ['Ook_SplittingAmount', 'Дробление СФ'],\r\n  ['Break_NDS', 'Разрыв по НДС'],\r\n  ['Ook_JournalsNotInDeclAmount', 'Журнал выставленных СФ без полученных СФ'],\r\n  ['Krsb_Indicator', 'Наличие задолженности'],\r\n]);\r\n\r\nexport const indicatorsFilter = [\r\n  { icon: icons.difference11, name: 'Расхождения по разделу 11', brief: 'Ook_Mis11Amount' },\r\n  {\r\n    icon: icons.diffAfterKnp,\r\n    name: 'Расхождения после завершения КНП',\r\n    brief: 'Ook_MisAfterKnpAmount',\r\n  },\r\n  { icon: icons.control, name: 'Контрольные соотношения', brief: 'Ook_KsVatAmount' },\r\n  { icon: icons.isDebt, name: 'Сомнительные начисления', brief: 'Ook_DoubtfulAmount' },\r\n  { icon: icons.SF2015, name: 'СФ до 2015г. в разделе 8', brief: 'Ook_Inv2015Ch8Amount' },\r\n  { icon: icons.SF2015, name: 'СФ до 2015г. в разделе 11', brief: 'Ook_Inv2015Ch11Amount' },\r\n  { icon: icons.KVO17, name: 'КВО 17', brief: 'Ook_Oc17Amount' },\r\n  { icon: icons.KVO23, name: 'КВО 23', brief: 'Ook_Oc23Amount' },\r\n  { icon: icons.KVO45, name: 'КВО 45', brief: 'Ook_Oc45Amount' },\r\n  { icon: icons.split, name: 'Дробление СФ', brief: 'Ook_SplittingAmount' },\r\n  { icon: icons.vat_gap, name: 'Разрыв по НДС', brief: 'Break_NDS' },\r\n  {\r\n    icon: icons.journal,\r\n    name: 'Журнал выставленных СФ без полученных СФ',\r\n    brief: 'Ook_JournalsNotInDeclAmount',\r\n  },\r\n  { icon: icons.debt, name: 'Наличие задолженности', brief: 'Krsb_Indicator' },\r\n];\r\n\r\nexport const filterKeyMap = new Map([\r\n  ['inns', 'ИНН НП'],\r\n  ['names', 'Наименование НП'],\r\n  ['integrals', 'СУР'],\r\n  ['analyticalRoles', 'Аналитическая роль'],\r\n  ['bizRoles', 'Бизнес роль'],\r\n  ['indicators', 'Индикаторы рисков'],\r\n  ['sales_from', 'sales_from'],\r\n  ['sales_to', 'sales_to'],\r\n  ['purchases_from', 'purchases_from'],\r\n  ['purchases_to', 'purchases_to'],\r\n  ['credit_from', 'Сумма по АБД. Расход от'],\r\n  ['credit_to', 'Сумма по АБД. Расход до'],\r\n  ['debet_from', 'Сумма по АБД. Приход от'],\r\n  ['debet_to', 'Сумма по АБД. Приход до'],\r\n]);\r\n\r\nexport const exceptionsIndicators = [\r\n  'DeclState_1',\r\n  'DeclState_2',\r\n  'DeclState_3',\r\n  'DeclState_0',\r\n  'Change_N',\r\n  'Change_K',\r\n  'Change_I',\r\n];\r\n","import { observer } from 'mobx-react';\r\nimport { useStores } from 'hooks';\r\nimport { CrossIcon } from '@fdc/vsa-react-lib';\r\nimport { DetailedGroupRequestParams } from 'ApiModel';\r\nimport React from 'react';\r\nimport { formatMoneyDetailedGroup } from 'utils/ui/formatMoneyDetailedGroup';\r\nimport tableStyles from '../TableData/TableData.module.scss';\r\nimport { briefToIcon, indicatorsFilter, roleNameMap, surFilter } from '../TableData/utils';\r\nimport styles from './FiltersRow.module.scss';\r\n\r\ntype Props = {\r\n  groupFilter: DetailedGroupRequestParams['groupFilter'];\r\n  onChange: (groupFilter: DetailedGroupRequestParams['groupFilter']) => void;\r\n  businessRoles?: any;\r\n};\r\n\r\nexport const FiltersRow = observer(({ groupFilter, onChange }: Props) => {\r\n  const {\r\n    commonStore: { getAnalyticalRoleById, getBusinessRoleById },\r\n  } = useStores();\r\n  return (\r\n    <div className={styles.container}>\r\n      {Object.entries(groupFilter).map(([key, value]) => {\r\n        const valuesArr = value as string[];\r\n        const indicators = value as { name: string }[];\r\n\r\n        return (\r\n          (key === 'analyticalRoles' &&\r\n            (valuesArr as unknown as number[]).map((role) => {\r\n              const roleIcon = getAnalyticalRoleById(role)?.icon;\r\n              const roleName = getAnalyticalRoleById(role)?.value;\r\n\r\n              return (\r\n                <div className={styles.filterTag} title={roleName}>\r\n                  {roleIcon && (\r\n                    <img\r\n                      src={`data:image/svg+xml;utf8,${encodeURIComponent(roleIcon)}`}\r\n                      alt={roleName}\r\n                    />\r\n                  )}\r\n                  <span>{roleName}</span>\r\n                  <div className={styles.crossIcon}>\r\n                    <CrossIcon\r\n                      onClick={() => {\r\n                        onChange({\r\n                          ...groupFilter,\r\n                          [key]: (valuesArr as unknown as number[]).filter((item) => item !== role),\r\n                        });\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              );\r\n            })) ||\r\n          (key === 'integrals' &&\r\n            valuesArr.map((sur) => {\r\n              const surItem = surFilter.find(({ brief }) => brief === sur);\r\n\r\n              if (!surItem) return null;\r\n\r\n              return (\r\n                <div className={styles.filterTag} title={surItem.name}>\r\n                  <div className={`${tableStyles.round} ${tableStyles[surItem?.color]}`} />\r\n                  <span>{surItem.name}</span>\r\n                  <div className={styles.crossIcon}>\r\n                    <CrossIcon\r\n                      onClick={() => {\r\n                        onChange({\r\n                          ...groupFilter,\r\n                          [key]: valuesArr.filter((item) => item !== sur),\r\n                        });\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              );\r\n            })) ||\r\n          (key === 'bizRoles' &&\r\n            (valuesArr as unknown as number[]).map((role) => {\r\n              const roleIcon = getBusinessRoleById(role)?.icon;\r\n              const roleName = getBusinessRoleById(role)?.value;\r\n\r\n              return (\r\n                <div className={styles.filterTag} title={roleName}>\r\n                  {roleIcon && (\r\n                    <img\r\n                      src={`data:image/svg+xml;utf8,${encodeURIComponent(roleIcon)}`}\r\n                      alt={roleName}\r\n                    />\r\n                  )}\r\n                  <span>{roleName}</span>\r\n                  <div className={styles.crossIcon}>\r\n                    <CrossIcon\r\n                      onClick={() => {\r\n                        onChange({\r\n                          ...groupFilter,\r\n                          [key]: (valuesArr as unknown as number[]).filter((item) => item !== role),\r\n                        });\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              );\r\n            })) ||\r\n          (key === 'inns' &&\r\n            valuesArr.map((inn) => (\r\n              <div className={styles.filterTag} title={inn}>\r\n                <span>ИНН НП: {inn}</span>\r\n                <div className={styles.crossIcon}>\r\n                  <CrossIcon\r\n                    onClick={() => {\r\n                      onChange({\r\n                        ...groupFilter,\r\n                        [key]: valuesArr.filter((item) => item !== inn),\r\n                      });\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ))) ||\r\n          (key === 'names' &&\r\n            valuesArr?.map((name) => (\r\n              <div className={styles.filterTag} title={name}>\r\n                <span>Наименование НП: {name}</span>\r\n                <div className={styles.crossIcon}>\r\n                  <CrossIcon\r\n                    onClick={() => {\r\n                      onChange({\r\n                        ...groupFilter,\r\n                        [key]: valuesArr?.filter((item) => item !== name),\r\n                      });\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ))) ||\r\n          (key === 'indicators' &&\r\n            indicators.map(({ name }) => {\r\n              const indicator = indicatorsFilter.find(({ brief }) => brief === name);\r\n\r\n              return (\r\n                <div className={styles.filterTag} title={indicator?.name}>\r\n                  <img src={indicator?.icon} alt={indicator?.name} />\r\n                  <span>{indicator?.name}</span>\r\n                  <div className={styles.crossIcon}>\r\n                    <CrossIcon\r\n                      onClick={() => {\r\n                        onChange({\r\n                          ...groupFilter,\r\n                          [key]: indicators.filter((item) => item.name !== name),\r\n                        });\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              );\r\n            }))\r\n        );\r\n      })}\r\n\r\n      {(groupFilter.ook_from || groupFilter.ook_to) && (\r\n        <div\r\n          className={styles.filterTag}\r\n          title={`Сумма ООК и расхождений: ${formatMoneyDetailedGroup(\r\n            groupFilter.ook_from,\r\n          )} - ${formatMoneyDetailedGroup(groupFilter.ook_to)}`}\r\n        >\r\n          <span>\r\n            Сумма ООК и расхождений:\r\n            {`${formatMoneyDetailedGroup(groupFilter.ook_from)} - ${formatMoneyDetailedGroup(\r\n              groupFilter.ook_to,\r\n            )}`}\r\n          </span>\r\n          <div className={styles.crossIcon}>\r\n            <CrossIcon\r\n              onClick={() => {\r\n                onChange({ ...groupFilter, ook_from: undefined, ook_to: undefined });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {(groupFilter.taxGap_from || groupFilter.taxGap_to) && (\r\n        <div\r\n          className={styles.filterTag}\r\n          title={`TG продавца: ${\r\n            groupFilter.taxGap_from ? groupFilter.taxGap_from + '%' : '...'\r\n          } - ${groupFilter.taxGap_to ? groupFilter.taxGap_to + '%' : '...'}`}\r\n        >\r\n          <span>\r\n            TG продавца:\r\n            {`${groupFilter.taxGap_from ? groupFilter.taxGap_from + '%' : '...'} - ${\r\n              groupFilter.taxGap_to ? groupFilter.taxGap_to + '%' : '...'\r\n            }`}\r\n          </span>\r\n          <div className={styles.crossIcon}>\r\n            <CrossIcon\r\n              onClick={() => {\r\n                onChange({ ...groupFilter, taxGap_from: undefined, taxGap_to: undefined });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {(groupFilter.purchases_from || groupFilter.purchases_to) && (\r\n        <div\r\n          className={styles.filterTag}\r\n          title={`НДС к вычету по НД: ${formatMoneyDetailedGroup(\r\n            groupFilter.purchases_from,\r\n          )} - ${formatMoneyDetailedGroup(groupFilter.purchases_to)}`}\r\n        >\r\n          <span>\r\n            НДС к вычету по НД:\r\n            {`${formatMoneyDetailedGroup(groupFilter.purchases_from)} - ${formatMoneyDetailedGroup(\r\n              groupFilter.purchases_to,\r\n            )}`}\r\n          </span>\r\n          <div className={styles.crossIcon}>\r\n            <CrossIcon\r\n              onClick={() => {\r\n                onChange({ ...groupFilter, purchases_from: undefined, purchases_to: undefined });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {(groupFilter.sales_from || groupFilter.sales_to) && (\r\n        <div\r\n          className={styles.filterTag}\r\n          title={`Исчисленный НДС по НД: ${formatMoneyDetailedGroup(\r\n            groupFilter.sales_from,\r\n          )} - ${formatMoneyDetailedGroup(groupFilter.sales_to)}`}\r\n        >\r\n          <span>\r\n            Исчисленный НДС по НД:\r\n            {`${formatMoneyDetailedGroup(groupFilter.sales_from)} - ${formatMoneyDetailedGroup(\r\n              groupFilter.sales_to,\r\n            )}`}\r\n          </span>\r\n          <div className={styles.crossIcon}>\r\n            <CrossIcon\r\n              onClick={() => {\r\n                onChange({ ...groupFilter, sales_from: undefined, sales_to: undefined });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {(groupFilter.debet_from || groupFilter.debet_to) && (\r\n        <div\r\n          className={styles.filterTag}\r\n          title={`Сумма по АБД. Приход: ${formatMoneyDetailedGroup(\r\n            groupFilter.debet_from,\r\n          )} - ${formatMoneyDetailedGroup(groupFilter.debet_to)}`}\r\n        >\r\n          <span>\r\n            Сумма по АБД. Приход:\r\n            {`${formatMoneyDetailedGroup(groupFilter.debet_from)} - ${formatMoneyDetailedGroup(\r\n              groupFilter.debet_to,\r\n            )}`}\r\n          </span>\r\n          <div className={styles.crossIcon}>\r\n            <CrossIcon\r\n              onClick={() => {\r\n                onChange({ ...groupFilter, debet_from: undefined, debet_to: undefined });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {(groupFilter.credit_from || groupFilter.credit_to) && (\r\n        <div\r\n          className={styles.filterTag}\r\n          title={`Сумма по АБД. Расход: ${formatMoneyDetailedGroup(\r\n            groupFilter.credit_from,\r\n          )} - ${formatMoneyDetailedGroup(groupFilter.credit_to)}`}\r\n        >\r\n          <span>\r\n            Сумма по АБД. Расход:\r\n            {`${formatMoneyDetailedGroup(groupFilter.credit_from)} - ${formatMoneyDetailedGroup(\r\n              groupFilter.credit_to,\r\n            )}`}\r\n          </span>\r\n          <div className={styles.crossIcon}>\r\n            <CrossIcon\r\n              onClick={() => {\r\n                onChange({ ...groupFilter, credit_from: undefined, credit_to: undefined });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {(groupFilter.quarter_from || groupFilter.quarter_to) && (\r\n        <div\r\n          className={styles.filterTag}\r\n          title={`Квартал: ${groupFilter.quarter_from} - ${groupFilter.quarter_to ?? '...'}`}\r\n        >\r\n          <span>\r\n            Квартал:\r\n            {`${groupFilter.quarter_from} - ${groupFilter.quarter_to ?? '...'}`}\r\n          </span>\r\n          <div className={styles.crossIcon}>\r\n            <CrossIcon\r\n              onClick={() => {\r\n                onChange({ ...groupFilter, quarter_from: undefined, quarter_to: undefined });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {(groupFilter.year_from || groupFilter.year_to) && (\r\n        <div\r\n          className={styles.filterTag}\r\n          title={`Год: ${groupFilter.year_from} - ${groupFilter.year_to ?? '...'}`}\r\n        >\r\n          <span>\r\n            Год:\r\n            {`${groupFilter.year_from} - ${groupFilter.year_to ?? '...'}`}\r\n          </span>\r\n          <div className={styles.crossIcon}>\r\n            <CrossIcon\r\n              onClick={() => {\r\n                onChange({ ...groupFilter, year_from: undefined, year_to: undefined });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {(groupFilter.vatDeductBuyer_from || groupFilter.vatDeductBuyer_to) && (\r\n        <div\r\n          className={styles.filterTag}\r\n          title={`НДС к вычету у покупателя: ${formatMoneyDetailedGroup(\r\n            groupFilter.vatDeductBuyer_from,\r\n          )} - ${formatMoneyDetailedGroup(groupFilter.vatDeductBuyer_to)}`}\r\n        >\r\n          <span>\r\n            НДС к вычету у покупателя:\r\n            {`${formatMoneyDetailedGroup(\r\n              groupFilter.vatDeductBuyer_from,\r\n            )} - ${formatMoneyDetailedGroup(groupFilter.vatDeductBuyer_to)}`}\r\n          </span>\r\n          <div className={styles.crossIcon}>\r\n            <CrossIcon\r\n              onClick={() => {\r\n                onChange({\r\n                  ...groupFilter,\r\n                  vatDeductBuyer_from: undefined,\r\n                  vatDeductBuyer_to: undefined,\r\n                });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {(groupFilter.vatCalcSeller_from || groupFilter.vatCalcSeller_to) && (\r\n        <div\r\n          className={styles.filterTag}\r\n          title={`НДС, начисленный продавцом: ${formatMoneyDetailedGroup(\r\n            groupFilter.vatCalcSeller_from,\r\n          )} - ${formatMoneyDetailedGroup(groupFilter.vatCalcSeller_to)}`}\r\n        >\r\n          <span>\r\n            НДС, начисленный продавцом:\r\n            {`${formatMoneyDetailedGroup(\r\n              groupFilter.vatCalcSeller_from,\r\n            )} - ${formatMoneyDetailedGroup(groupFilter.vatCalcSeller_to)}`}\r\n          </span>\r\n          <div className={styles.crossIcon}>\r\n            <CrossIcon\r\n              onClick={() => {\r\n                onChange({\r\n                  ...groupFilter,\r\n                  vatCalcSeller_from: undefined,\r\n                  vatCalcSeller_to: undefined,\r\n                });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M8.75214 2.49663L7.94175 3.30702C7.85913 3.38964 7.72553 3.38964 7.64291 3.30702L5.69164 1.35577C5.60902 1.27315 5.60902 1.13955 5.69164 1.05693L6.50203 0.246543C6.83076 -0.082181 7.36516 -0.082181 7.69564 0.246543L8.75214 1.30303C9.08262 1.63175 9.08262 2.16615 8.75214 2.49663ZM4.99552 1.75305L0.379289 6.36925L0.00661504 8.50507C-0.0443639 8.79337 0.207015 9.04299 0.49531 8.99377L2.63115 8.61934L7.24738 4.00314C7.33 3.92052 7.33 3.78692 7.24738 3.7043L5.29612 1.75305C5.21174 1.67043 5.07814 1.67043 4.99552 1.75305ZM2.18113 5.97372C2.08445 5.87704 2.08445 5.72235 2.18113 5.62566L4.88829 2.91852C4.98497 2.82184 5.13967 2.82184 5.23635 2.91852C5.33303 3.01521 5.33303 3.1699 5.23635 3.26658L2.52919 5.97372C2.43251 6.07041 2.27781 6.07041 2.18113 5.97372ZM1.54653 7.4521H2.39032V8.09021L1.25648 8.28885L0.709773 7.74215L0.908415 6.60832H1.54653V7.4521Z\",\n  fill: \"#0B346A\"\n});\n\nfunction SvgEdit(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 9,\n    height: 9,\n    viewBox: \"0 0 9 9\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEdit);\nexport default __webpack_public_path__ + \"static/media/edit.655b66e4.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M9.33329 9.33333V13.3333L6.66663 14.6667V9.33333L2.66663 3.33333V2H13.3333V3.33333L9.33329 9.33333ZM4.26929 3.33333L7.99996 8.92933L11.7306 3.33333H4.26929Z\",\n  fill: \"#969696\"\n});\n\nfunction SvgFilter(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 16,\n    height: 16,\n    viewBox: \"0 0 16 16\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFilter);\nexport default __webpack_public_path__ + \"static/media/filter.31ac22c8.svg\";\nexport { ForwardRef as ReactComponent };","export default function range(start: number, stop: number, step: number = 1) {\r\n  return Array.from({ length: (stop - start) / step + 1 }, (_, i) => start + i * step);\r\n}\r\n","import { Input } from '@fdc/vsa-react-lib';\r\nimport React, { SyntheticEvent, useEffect, useRef } from 'react';\r\nimport { useStores } from 'hooks';\r\nimport { observer } from 'mobx-react';\r\nimport Dropdown from 'components/Dropdown';\r\nimport { getPeriodNumbers } from 'utils/getPeriodNumbers';\r\nimport range from 'utils/ui/range';\r\nimport styles from './RangeFilter.module.scss';\r\n\r\ntype Values = { from?: number; to?: number };\r\n\r\ntype Props = {\r\n  values?: Values;\r\n  onChange: (values: Values) => void;\r\n  onClose: () => void;\r\n  isPercent?: boolean;\r\n  lastClass?: any;\r\n  type?: 'dropdown' | 'text';\r\n  isYear?: boolean;\r\n};\r\n\r\nexport const RangeFilter = observer(\r\n  ({ values, onChange, onClose, isPercent, lastClass, type = 'text', isYear = false }: Props) => {\r\n    const {\r\n      periodDataFilter: {\r\n        options: { nds3_period_from, nds3_period_to },\r\n      },\r\n      groupDetailStore: {\r\n        params: { groupFilter },\r\n      },\r\n    } = useStores();\r\n\r\n    const { year: yearFrom, quarter: quarterFrom } = getPeriodNumbers(nds3_period_from);\r\n    const { year: yearTo, quarter: quarterTo } = getPeriodNumbers(nds3_period_to);\r\n\r\n    const years = range(yearFrom, yearTo).map((year) => year.toString());\r\n\r\n    const startQuarter = Number(groupFilter.year_from) === yearFrom ? quarterFrom : 1;\r\n    const endQuarter = Number(groupFilter.year_to) === yearTo ? quarterTo : 4;\r\n\r\n    const fromQuarters = range(startQuarter, 4).map((quarter) => quarter.toString());\r\n    const toQuarters = range(1, endQuarter).map((quarter) => quarter.toString());\r\n\r\n    const ref = useRef<HTMLDivElement>(null);\r\n\r\n    const handleClickOutside = (e: Event) =>\r\n      ref.current && !e.composedPath().includes(ref.current) && onClose();\r\n\r\n    const handleEnter = (e: Event) =>\r\n      ref.current && e.composedPath().includes(ref.current) && onClose();\r\n\r\n    useEffect(() => {\r\n      document.addEventListener('click', handleClickOutside);\r\n      return () => {\r\n        document.removeEventListener('click', handleClickOutside);\r\n      };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n      document.addEventListener('keypress', (e) => {\r\n        if (e.key === 'Enter') {\r\n          handleEnter(e);\r\n        }\r\n      });\r\n      return () => {\r\n        document.removeEventListener('keypress', handleEnter);\r\n      };\r\n    }, []);\r\n\r\n    return (\r\n      <div className={`${styles.container} ${lastClass}`} ref={ref}>\r\n        {type === 'text' ? (\r\n          <Input\r\n            placeholder={isPercent ? 'Введите значение «от»' : 'Введите сумму «от»'}\r\n            type=\"number\"\r\n            value={values?.from}\r\n            onChange={({ currentTarget: { value } }: SyntheticEvent<HTMLInputElement>) => {\r\n              onChange({ ...values, from: +value || undefined });\r\n            }}\r\n            autoFocus\r\n          />\r\n        ) : (\r\n          <Dropdown\r\n            dropdownStyle={`${styles.dropdown}`}\r\n            containerStyle={styles.rightContainer}\r\n            value={values?.from?.toString()}\r\n            items={isYear ? years : fromQuarters}\r\n            onSelect={(value) => onChange({ ...values, from: +value })}\r\n            isPeriod={true}\r\n            placeholder=\"От\"\r\n          />\r\n        )}\r\n        <div className={styles.dash}>—</div>\r\n        {type === 'text' ? (\r\n          <Input\r\n            placeholder={isPercent ? 'Введите значение «до»' : 'Введите сумму «до»'}\r\n            type=\"number\"\r\n            value={values?.to}\r\n            onChange={({ currentTarget: { value } }: SyntheticEvent<HTMLInputElement>) => {\r\n              onChange({ ...values, to: +value || undefined });\r\n            }}\r\n          />\r\n        ) : (\r\n          <Dropdown\r\n            dropdownStyle={`${styles.dropdown}`}\r\n            containerStyle={styles.rightContainer}\r\n            value={values?.to?.toString()}\r\n            items={isYear ? years : toQuarters}\r\n            onSelect={(value) => onChange({ ...values, to: +value })}\r\n            isPeriod={true}\r\n            placeholder=\"До\"\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  },\r\n);\r\n","import { Checkbox } from '@fdc/vsa-react-lib';\r\nimport React, { SyntheticEvent, useEffect, useRef } from 'react';\r\nimport { CheckboxIcon } from '../CheckboxIcon';\r\nimport tableStyles from '../TableData/TableData.module.scss';\r\nimport styles from './RoleFilter.module.scss';\r\n\r\ninterface Role {\r\n  icon?: string;\r\n  color?: string;\r\n  name: string;\r\n  brief: string;\r\n  role_id?: number | string;\r\n}\r\n\r\ntype Props = {\r\n  checked?: (string | number)[];\r\n  roles: Role[];\r\n  iconSize?: 'lg';\r\n  onChange: (checked: (string | number)[]) => void;\r\n  onClose: () => void;\r\n};\r\n\r\nexport const RoleFilter = ({ roles, checked = [], iconSize, onChange, onClose }: Props) => {\r\n  const ref = useRef<HTMLUListElement>(null);\r\n\r\n  const handleClickOutside = (e: Event) =>\r\n    ref.current && !e.composedPath().includes(ref.current) && onClose();\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keypress', (e) => {\r\n      if (e.key === 'Enter') {\r\n        handleClickOutside(e);\r\n      }\r\n    });\r\n    return () => {\r\n      document.removeEventListener('keypress', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <ul className={styles.container} ref={ref}>\r\n      {roles.map(({ icon, color, name, role_id = 0 }) => {\r\n        const isSelected = checked.includes(role_id);\r\n        return (\r\n          <li key={role_id} className={styles.listItem} title={name} data-selected={isSelected}>\r\n            <label>\r\n              <Checkbox\r\n                checked={isSelected}\r\n                onChange={({ currentTarget }: SyntheticEvent<HTMLInputElement>) => {\r\n                  if (currentTarget.checked) {\r\n                    onChange([...checked, role_id]);\r\n                  } else {\r\n                    onChange(checked.filter((item) => item !== role_id));\r\n                  }\r\n                }}\r\n                Icon={CheckboxIcon}\r\n              />\r\n              {icon && <img alt={name} src={icon} data-size={iconSize} />}\r\n              {color && <div className={`${styles.round} ${tableStyles[color]}`} />}\r\n              <span>{name}</span>\r\n            </label>\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n","import { Input } from '@fdc/vsa-react-lib';\r\nimport React, { SyntheticEvent, useEffect, useRef } from 'react';\r\nimport styles from './TextFilter.module.scss';\r\n\r\ntype Values = { from?: number; to?: number };\r\n\r\ntype Props = {\r\n  value?: string;\r\n  onChange: (value?: string) => void;\r\n  onClose: () => void;\r\n  label: string;\r\n};\r\n\r\nexport const TextFilter = ({ value, onChange, onClose, label }: Props) => {\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  const handleClickOutside = (e: Event) =>\r\n    ref.current && !e.composedPath().includes(ref.current) && onClose();\r\n\r\n  const handleEnter = (e: Event) =>\r\n    ref.current && e.composedPath().includes(ref.current) && onClose();\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener('click', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('keypress', (e) => {\r\n      if (e.key === 'Enter') {\r\n        handleEnter(e);\r\n      }\r\n    });\r\n    return () => {\r\n      document.removeEventListener('keypress', handleEnter);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className={styles.container} ref={ref}>\r\n      <Input\r\n        placeholder={label}\r\n        value={value}\r\n        onChange={({ currentTarget: { value } }: SyntheticEvent<HTMLInputElement>) =>\r\n          onChange(value)\r\n        }\r\n        autoFocus\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import { Checkbox, IPagination, Pagination } from '@fdc/vsa-react-lib';\r\nimport { DetailedGroupRequestParams } from 'ApiModel';\r\nimport { inject, observer } from 'mobx-react';\r\nimport React, { PureComponent, SyntheticEvent } from 'react';\r\nimport { CommonStoreType } from 'stores/common/commonStore';\r\nimport { formatMoney } from 'utils/ui/formatMoney';\r\nimport { GraphStoreType } from '../../../../../stores/graph/graphStore';\r\nimport { ModalStoreType } from '../../../../../stores/modalStore';\r\nimport { commodityFlow } from '../../../../../utils/commodityFlow';\r\nimport { SPECIAL_INN } from '../../../../constants';\r\nimport {\r\n  DETAILED_NODE_MODAL,\r\n  MODAL_DETAILED_INDIVIDUAL_PERSON,\r\n} from '../../../constants/modalNames';\r\nimport { ReactComponent as EditIcon } from '../../assets/edit.svg';\r\nimport { ReactComponent as FilterIcon } from '../../assets/filter.svg';\r\nimport { CheckboxIcon } from '../CheckboxIcon';\r\nimport { CheckboxIconDark } from '../CheckboxIconDark';\r\nimport { RangeFilter } from '../RangeFilter/RangeFilter';\r\nimport { RoleFilter } from '../RoleFilter/RoleFilter';\r\nimport { TextFilter } from '../TextFilter/TextFilter';\r\nimport styles from './TableData.module.scss';\r\nimport {\r\n  briefToIcon,\r\n  exceptionsIndicators,\r\n  indicatorsFilter,\r\n  indicatorsNameMap,\r\n  roleNameMap,\r\n  surFilter,\r\n} from './utils';\r\n\r\ntype TableDataProps = {\r\n  groupData: any;\r\n  total: number;\r\n  commonStore?: CommonStoreType;\r\n  pagination: IPagination;\r\n  groupFilter: DetailedGroupRequestParams['groupFilter'];\r\n  onPaginationChange: (pagination: IPagination) => void;\r\n  onFilterChange: (groupFilter: DetailedGroupRequestParams['groupFilter']) => void;\r\n  extract: string[];\r\n  onExtractChange: (extract: string[]) => void;\r\n  modalStore?: ModalStoreType;\r\n  graphStore?: GraphStoreType;\r\n  category: string;\r\n  groupID?: any;\r\n  params?: any;\r\n  virtualExtract: any;\r\n  onVirtualExtractChange: (virtualExtract: any) => void;\r\n  isVirtual: boolean;\r\n};\r\n\r\ntype State = {\r\n  openedFilterField?: string;\r\n  groupFilter: DetailedGroupRequestParams['groupFilter'];\r\n};\r\n\r\n/**\r\n *  Компонент по отображению состава группы в виде таблицы\r\n */\r\n@inject('commonStore', 'modalStore', 'graphStore')\r\n@observer\r\nclass TableData extends PureComponent<TableDataProps, State> {\r\n  constructor(props: TableDataProps) {\r\n    super(props);\r\n\r\n    this.state = { groupFilter: props.groupFilter };\r\n  }\r\n\r\n  /**\r\n   * Редактировать НП\r\n   * @param orig_id - id НП\r\n   * @param subject_type - тип НП\r\n   * @private\r\n   */\r\n  _editNode = async (orig_id: any, subject_type: any) => {\r\n    const {\r\n      props: { modalStore, groupID, params },\r\n    } = this;\r\n    const is_from_group = true;\r\n\r\n    try {\r\n      if (subject_type === 'FL') {\r\n        const isShow = true;\r\n        modalStore?.openModal(MODAL_DETAILED_INDIVIDUAL_PERSON, {\r\n          orig_id,\r\n          isShow,\r\n          groupID,\r\n          params,\r\n          is_from_group,\r\n        });\r\n      } else {\r\n        modalStore?.openModal(DETAILED_NODE_MODAL, { orig_id, is_from_group, groupID, params });\r\n      }\r\n    } catch (err) {\r\n      console.warn('Error on fetch node details: ', err.message);\r\n    }\r\n  };\r\n\r\n  onFilterChange = (groupFilter: DetailedGroupRequestParams['groupFilter']) =>\r\n    this.setState({ groupFilter });\r\n\r\n  businessRoles =\r\n    this.props.commonStore?.businessRoles.order.map(({ brief, value, role_id }) => ({\r\n      icon: this.props.commonStore?.businessRolesIcons[brief].icon,\r\n      name: value,\r\n      brief,\r\n      role_id,\r\n    })) || [];\r\n\r\n  analyticalRoles =\r\n    this.props.commonStore?.analyticalRoles.order\r\n      .filter(({ used_in_vsa }) => used_in_vsa)\r\n      .map(({ brief, value, role_id }) => ({\r\n        icon: this.props.commonStore?.analyticalRolesIcons[brief].icon,\r\n        name: value,\r\n        brief,\r\n        role_id,\r\n      })) || [];\r\n\r\n  setFilterField = (openedFilterField?: string) => {\r\n    this.setState({ openedFilterField });\r\n    if (!openedFilterField) this.props.onFilterChange(this.state.groupFilter);\r\n  };\r\n\r\n  componentDidUpdate(prevProps: TableDataProps) {\r\n    if (prevProps.groupFilter !== this.props.groupFilter)\r\n      this.setState({ groupFilter: this.props.groupFilter });\r\n  }\r\n\r\n  onMainCheckbox = () => {\r\n    const {\r\n      onExtractChange,\r\n      extract,\r\n      onVirtualExtractChange,\r\n      virtualExtract,\r\n      groupData,\r\n      isVirtual,\r\n    } = this.props;\r\n\r\n    let arrayItems: any = [];\r\n\r\n    if (isVirtual) {\r\n      if (\r\n        groupData.every((element: any) =>\r\n          virtualExtract.some((item: any) => item.inn === element.inn && item.fid === element.fid),\r\n        )\r\n      ) {\r\n        onVirtualExtractChange(\r\n          virtualExtract.filter((item: any) =>\r\n            groupData.every((element: any) => !element.inn.includes(item.inn)),\r\n          ),\r\n        );\r\n      } else if (\r\n        groupData.some((element: any) =>\r\n          virtualExtract.some((item: any) => item.inn === element.inn && item.fid === element.fid),\r\n        )\r\n      ) {\r\n        groupData\r\n          .filter((element: any) => virtualExtract.some((item: any) => item.inn !== element.inn))\r\n          .map((element: any) => {\r\n            arrayItems = [...arrayItems, element];\r\n          });\r\n        onVirtualExtractChange([...virtualExtract, ...arrayItems]);\r\n      } else {\r\n        groupData.map((element: any) => {\r\n          arrayItems = [...arrayItems, element];\r\n        });\r\n        onVirtualExtractChange([...virtualExtract, ...arrayItems]);\r\n      }\r\n    } else {\r\n      if (groupData.every((element: any) => extract.includes(element.id))) {\r\n        onExtractChange(\r\n          extract.filter((id) => groupData.every((element: any) => !element.id.includes(id))),\r\n        );\r\n      } else if (groupData.some((element: any) => extract.includes(element.id))) {\r\n        groupData\r\n          .filter((element: any) => !extract.includes(element.id))\r\n          .map((element: any) => {\r\n            arrayItems = [...arrayItems, element.id];\r\n          });\r\n        onExtractChange([...extract, ...arrayItems]);\r\n      } else {\r\n        groupData.map((element: any) => {\r\n          arrayItems = [...arrayItems, element.id];\r\n        });\r\n        onExtractChange([...extract, ...arrayItems]);\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      props: {\r\n        groupData,\r\n        commonStore,\r\n        pagination,\r\n        onPaginationChange,\r\n        onExtractChange,\r\n        extract,\r\n        category,\r\n        graphStore,\r\n        virtualExtract,\r\n        onVirtualExtractChange,\r\n        isVirtual,\r\n      },\r\n      state: { groupFilter, openedFilterField },\r\n      onFilterChange,\r\n    } = this;\r\n\r\n    return (\r\n      <div className={styles.tableMain}>\r\n        <div className={styles.table_container}>\r\n          <table className={styles.data_table} cellSpacing=\"0\" cellPadding=\"0\">\r\n            <thead className={styles.data_table_header}>\r\n              <tr>\r\n                <th className={styles.data_table_checkbox}>\r\n                  <Checkbox\r\n                    onChange={() => this.onMainCheckbox()}\r\n                    checked={\r\n                      isVirtual\r\n                        ? groupData.every((element: any) =>\r\n                            virtualExtract.some(\r\n                              (item: any) => item.inn === element.inn && item.fid === element.fid,\r\n                            ),\r\n                          )\r\n                        : groupData.every((element: any) => extract.includes(element.id))\r\n                    }\r\n                    someSelected={\r\n                      isVirtual\r\n                        ? groupData.some((element: any) =>\r\n                            virtualExtract.some(\r\n                              (item: any) => item.inn === element.inn && item.fid === element.fid,\r\n                            ),\r\n                          ) &&\r\n                          !groupData.every((element: any) =>\r\n                            virtualExtract.some(\r\n                              (item: any) => item.inn === element.inn && item.fid === element.fid,\r\n                            ),\r\n                          )\r\n                        : groupData.some((element: any) => extract.includes(element.id)) &&\r\n                          !groupData.every((element: any) => extract.includes(element.id))\r\n                    }\r\n                    Icon={commonStore?.appTheme === 'dark' ? CheckboxIconDark : CheckboxIcon}\r\n                  />\r\n                </th>\r\n                <th\r\n                  className={styles.alignCenter}\r\n                  onClick={() => this.setFilterField('integrals')}\r\n                  data-active={openedFilterField === 'integrals'}\r\n                >\r\n                  <span>СУР</span>\r\n                  <FilterIcon />\r\n                  {openedFilterField === 'integrals' && (\r\n                    <RoleFilter\r\n                      roles={surFilter}\r\n                      checked={groupFilter.integrals}\r\n                      onChange={(integrals) =>\r\n                        onFilterChange({ ...groupFilter, integrals: integrals as string[] })\r\n                      }\r\n                      onClose={() => this.setFilterField()}\r\n                    />\r\n                  )}\r\n                </th>\r\n                <th\r\n                  onClick={() => this.setFilterField('inns')}\r\n                  data-active={openedFilterField === 'inns'}\r\n                >\r\n                  <span>ИНН НП</span>\r\n                  <FilterIcon />\r\n                  {openedFilterField === 'inns' && (\r\n                    <TextFilter\r\n                      label=\"ИНН НП\"\r\n                      value={groupFilter.inns?.[0]}\r\n                      onChange={(inn) =>\r\n                        onFilterChange({ ...groupFilter, inns: inn ? [inn] : undefined })\r\n                      }\r\n                      onClose={() => this.setFilterField()}\r\n                    />\r\n                  )}\r\n                </th>\r\n                <th\r\n                  onClick={() => this.setFilterField('names')}\r\n                  data-active={openedFilterField === 'names'}\r\n                >\r\n                  <span>Наименование НП</span>\r\n                  <FilterIcon />\r\n                  {openedFilterField === 'names' && (\r\n                    <TextFilter\r\n                      label=\"Наименование НП\"\r\n                      value={groupFilter.names?.[0]}\r\n                      onChange={(name) =>\r\n                        onFilterChange({ ...groupFilter, names: name ? [name] : undefined })\r\n                      }\r\n                      onClose={() => this.setFilterField()}\r\n                    />\r\n                  )}\r\n                </th>\r\n                <th\r\n                  onClick={() => this.setFilterField('quarter')}\r\n                  data-active={openedFilterField === 'quarter'}\r\n                >\r\n                  <span>Квартал</span>\r\n                  <FilterIcon />\r\n                  {openedFilterField === 'quarter' && (\r\n                    <RangeFilter\r\n                      values={{ from: groupFilter.quarter_from, to: groupFilter.quarter_to }}\r\n                      onChange={({ from, to }) =>\r\n                        onFilterChange({ ...groupFilter, quarter_from: from, quarter_to: to })\r\n                      }\r\n                      onClose={() => this.setFilterField()}\r\n                      isPercent\r\n                      type=\"dropdown\"\r\n                    />\r\n                  )}\r\n                </th>\r\n                <th\r\n                  onClick={() => this.setFilterField('year')}\r\n                  data-active={openedFilterField === 'year'}\r\n                >\r\n                  <span>Год</span>\r\n                  <FilterIcon />\r\n                  {openedFilterField === 'year' && (\r\n                    <RangeFilter\r\n                      values={{ from: groupFilter.year_from, to: groupFilter.year_to }}\r\n                      onChange={({ from, to }) =>\r\n                        onFilterChange({ ...groupFilter, year_from: from, year_to: to })\r\n                      }\r\n                      onClose={() => this.setFilterField()}\r\n                      isPercent\r\n                      type=\"dropdown\"\r\n                      isYear\r\n                    />\r\n                  )}\r\n                </th>\r\n                <th\r\n                  onClick={() => this.setFilterField('analyticalRoles')}\r\n                  data-active={openedFilterField === 'analyticalRoles'}\r\n                >\r\n                  <span>Аналитическая роль</span>\r\n                  <FilterIcon />\r\n                  {openedFilterField === 'analyticalRoles' && (\r\n                    <RoleFilter\r\n                      roles={this.analyticalRoles}\r\n                      checked={groupFilter.analyticalRoles}\r\n                      onChange={(analyticalRoles) =>\r\n                        onFilterChange({\r\n                          ...groupFilter,\r\n                          analyticalRoles: analyticalRoles as number[],\r\n                        })\r\n                      }\r\n                      onClose={() => this.setFilterField()}\r\n                    />\r\n                  )}\r\n                </th>\r\n                <th\r\n                  onClick={() => this.setFilterField('bizRoles')}\r\n                  data-active={openedFilterField === 'bizRoles'}\r\n                >\r\n                  <span>Бизнес роль</span>\r\n                  <FilterIcon />\r\n                  {openedFilterField === 'bizRoles' && (\r\n                    <RoleFilter\r\n                      roles={this.businessRoles}\r\n                      checked={groupFilter.bizRoles}\r\n                      onChange={(bizRoles) =>\r\n                        onFilterChange({ ...groupFilter, bizRoles: bizRoles as number[] })\r\n                      }\r\n                      onClose={() => this.setFilterField()}\r\n                      iconSize=\"lg\"\r\n                    />\r\n                  )}\r\n                </th>\r\n                <th\r\n                  className={styles.alignRight}\r\n                  onClick={() => this.setFilterField('ookCorrectionSum')}\r\n                  data-active={openedFilterField === 'ookCorrectionSum'}\r\n                >\r\n                  <span>Сумма ООК и расхождений, ₽</span>\r\n                  <FilterIcon />\r\n                  {openedFilterField === 'ookCorrectionSum' && (\r\n                    <RangeFilter\r\n                      values={{ from: groupFilter.ook_from, to: groupFilter.ook_to }}\r\n                      onChange={({ from, to }) =>\r\n                        onFilterChange({ ...groupFilter, ook_from: from, ook_to: to })\r\n                      }\r\n                      onClose={() => this.setFilterField()}\r\n                    />\r\n                  )}\r\n                </th>\r\n                <th\r\n                  className={styles.alignRight}\r\n                  style={{ width: 'auto' }}\r\n                  onClick={() => this.setFilterField('taxGap')}\r\n                  data-active={openedFilterField === 'taxGap'}\r\n                >\r\n                  <span>TG продавца</span>\r\n                  <FilterIcon />\r\n                  {openedFilterField === 'taxGap' && (\r\n                    <RangeFilter\r\n                      values={{ from: groupFilter.taxGap_from, to: groupFilter.taxGap_to }}\r\n                      onChange={({ from, to }) =>\r\n                        onFilterChange({ ...groupFilter, taxGap_from: from, taxGap_to: to })\r\n                      }\r\n                      onClose={() => this.setFilterField()}\r\n                      isPercent\r\n                    />\r\n                  )}\r\n                </th>\r\n                <th\r\n                  className={styles.alignCenter}\r\n                  onClick={() => this.setFilterField('indicators')}\r\n                  data-active={openedFilterField === 'indicators'}\r\n                >\r\n                  <span>Индикаторы рисков</span>\r\n                  <FilterIcon />\r\n                  {openedFilterField === 'indicators' && (\r\n                    <RoleFilter\r\n                      roles={indicatorsFilter}\r\n                      checked={groupFilter.indicators?.map(({ name }) => name as string)}\r\n                      onChange={(indicators) =>\r\n                        onFilterChange({\r\n                          ...groupFilter,\r\n                          indicators: indicators.map((name) => ({ name: name as string })),\r\n                        })\r\n                      }\r\n                      onClose={() => this.setFilterField()}\r\n                    />\r\n                  )}\r\n                </th>\r\n                {graphStore?.graphExpandType !== 'Nds' ? (\r\n                  ''\r\n                ) : (\r\n                  <>\r\n                    <th\r\n                      className={styles.alignRight}\r\n                      onClick={() => this.setFilterField('vatDeductBuyer')}\r\n                      data-active={openedFilterField === 'vatDeductBuyer'}\r\n                    >\r\n                      <span>НДС к вычету у покупателя, ₽</span>\r\n                      <FilterIcon />\r\n                      {openedFilterField === 'vatDeductBuyer' && (\r\n                        <RangeFilter\r\n                          values={{\r\n                            from: groupFilter.vatDeductBuyer_from,\r\n                            to: groupFilter.vatDeductBuyer_to,\r\n                          }}\r\n                          onChange={({ from, to }) =>\r\n                            onFilterChange({\r\n                              ...groupFilter,\r\n                              vatDeductBuyer_from: from,\r\n                              vatDeductBuyer_to: to,\r\n                            })\r\n                          }\r\n                          onClose={() => this.setFilterField()}\r\n                        />\r\n                      )}\r\n                    </th>\r\n                    <th\r\n                      className={styles.alignRight}\r\n                      onClick={() => this.setFilterField('vatCalcSeller')}\r\n                      data-active={openedFilterField === 'vatCalcSeller'}\r\n                    >\r\n                      <span>НДС, начисленный продавцу, ₽</span>\r\n                      <FilterIcon />\r\n                      {openedFilterField === 'vatCalcSeller' && (\r\n                        <RangeFilter\r\n                          values={{\r\n                            from: groupFilter.vatCalcSeller_from,\r\n                            to: groupFilter.vatCalcSeller_to,\r\n                          }}\r\n                          onChange={({ from, to }) =>\r\n                            onFilterChange({\r\n                              ...groupFilter,\r\n                              vatCalcSeller_from: from,\r\n                              vatCalcSeller_to: to,\r\n                            })\r\n                          }\r\n                          onClose={() => this.setFilterField()}\r\n                        />\r\n                      )}\r\n                    </th>\r\n                  </>\r\n                )}\r\n                {(graphStore?.graphExpandType === 'Nds' ||\r\n                  commodityFlow.some((item) => graphStore?.graphExpandType.includes(item))) && (\r\n                  <>\r\n                    <th\r\n                      className={styles.alignRight}\r\n                      onClick={() => this.setFilterField('purchases')}\r\n                      data-active={openedFilterField === 'purchases'}\r\n                    >\r\n                      <span>НДС к вычету по НД, ₽</span>\r\n                      <FilterIcon />\r\n                      {openedFilterField === 'purchases' && (\r\n                        <RangeFilter\r\n                          values={{\r\n                            from: groupFilter.purchases_from,\r\n                            to: groupFilter.purchases_to,\r\n                          }}\r\n                          onChange={({ from, to }) =>\r\n                            onFilterChange({\r\n                              ...groupFilter,\r\n                              purchases_from: from,\r\n                              purchases_to: to,\r\n                            })\r\n                          }\r\n                          onClose={() => this.setFilterField()}\r\n                        />\r\n                      )}\r\n                    </th>\r\n                    <th\r\n                      className={styles.alignRight}\r\n                      onClick={() => this.setFilterField('sales')}\r\n                      data-active={openedFilterField === 'sales'}\r\n                    >\r\n                      <span>Исчисленный НДС по НД, ₽</span>\r\n                      <FilterIcon />\r\n                      {openedFilterField === 'sales' && (\r\n                        <RangeFilter\r\n                          lastClass={styles.lastFilter}\r\n                          values={{ from: groupFilter.sales_from, to: groupFilter.sales_to }}\r\n                          onChange={({ from, to }) =>\r\n                            onFilterChange({ ...groupFilter, sales_from: from, sales_to: to })\r\n                          }\r\n                          onClose={() => this.setFilterField()}\r\n                        />\r\n                      )}\r\n                    </th>\r\n                  </>\r\n                )}\r\n                {graphStore?.graphExpandType === 'Abd' && (\r\n                  <>\r\n                    <th\r\n                      onClick={() => this.setFilterField('debitSum')}\r\n                      data-active={openedFilterField === 'debitSum'}\r\n                    >\r\n                      <span>Сумма по АБД. Приход</span>\r\n                      <FilterIcon />\r\n                      {openedFilterField === 'debitSum' && (\r\n                        <RangeFilter\r\n                          values={{ from: groupFilter.debet_from, to: groupFilter.debet_to }}\r\n                          onChange={({ from, to }) =>\r\n                            onFilterChange({ ...groupFilter, debet_from: from, debet_to: to })\r\n                          }\r\n                          onClose={() => this.setFilterField()}\r\n                        />\r\n                      )}\r\n                    </th>\r\n                    <th\r\n                      onClick={() => this.setFilterField('creditSum')}\r\n                      data-active={openedFilterField === 'creditSum'}\r\n                    >\r\n                      <span>Сумма по АБД. Расход</span>\r\n                      <FilterIcon />\r\n                      {openedFilterField === 'creditSum' && (\r\n                        <RangeFilter\r\n                          values={{ from: groupFilter.credit_from, to: groupFilter.credit_to }}\r\n                          onChange={({ from, to }) =>\r\n                            onFilterChange({ ...groupFilter, credit_from: from, credit_to: to })\r\n                          }\r\n                          onClose={() => this.setFilterField()}\r\n                        />\r\n                      )}\r\n                    </th>\r\n                  </>\r\n                )}\r\n              </tr>\r\n            </thead>\r\n            <tbody className={styles.data_table_tbody}>\r\n              {groupData.map((element: any, index: number) => {\r\n                const taxGap = +element.taxGap;\r\n                const bizRole = commonStore?.businessRoles.order.find(\r\n                  ({ brief }) => brief === element.bizRole,\r\n                );\r\n                const isSelected = isVirtual\r\n                  ? virtualExtract?.some(\r\n                      (item: any) => item.fid === element.fid && item.inn === element.inn,\r\n                    )\r\n                  : extract.includes(element.id);\r\n\r\n                return (\r\n                  <tr key={index} data-selected={isSelected}>\r\n                    <td className={styles.data_table_checkbox}>\r\n                      {category !== 'VirtualGroup' &&\r\n                        !SPECIAL_INN.some((inn: any) => inn === element.inn) &&\r\n                        graphStore?.ableEdit && (\r\n                          <button\r\n                            className={styles.editButton}\r\n                            onClick={() => this._editNode(element.id, element.subject_type)}\r\n                          >\r\n                            <EditIcon title=\"Редактировать\" />\r\n                          </button>\r\n                        )}\r\n                      <Checkbox\r\n                        onChange={({ currentTarget }: SyntheticEvent<HTMLInputElement>) => {\r\n                          if (currentTarget.checked) {\r\n                            onExtractChange([...extract, element.id]);\r\n                            onVirtualExtractChange([...virtualExtract, element]);\r\n                          } else {\r\n                            onExtractChange(extract.filter((id) => id !== element.id));\r\n                            onVirtualExtractChange(\r\n                              virtualExtract.filter(\r\n                                (item: any) => item.inn !== element.inn && item.fid !== element.fid,\r\n                              ),\r\n                            );\r\n                          }\r\n                        }}\r\n                        checked={isSelected}\r\n                        Icon={commonStore?.appTheme === 'dark' ? CheckboxIconDark : CheckboxIcon}\r\n                      />\r\n                    </td>\r\n                    <td className={styles.integral}>\r\n                      <div>\r\n                        {element.integral === 'Low' ? (\r\n                          <div className={`${styles.round} ${styles.green}`} />\r\n                        ) : element.integral === 'Medium' ? (\r\n                          <div className={`${styles.round} ${styles.yellow}`} />\r\n                        ) : element.integral === 'High' ? (\r\n                          <div className={`${styles.round} ${styles.red}`} />\r\n                        ) : (\r\n                          <div className={`${styles.round} ${styles.gray}`} />\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td>{element.inn}</td>\r\n                    <td title={element.name}>{element.name}</td>\r\n                    <td title={element.quarter}>{element.quarter}</td>\r\n                    <td title={element.year}>{element.year}</td>\r\n                    <td>\r\n                      {element.analyticalRole && (\r\n                        <span\r\n                          className={styles.fullText}\r\n                          title={roleNameMap.get(element.analyticalRole)}\r\n                        >\r\n                          {roleNameMap.get(element.analyticalRole)}\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      {bizRole && (\r\n                        <span className={styles.fullText} title={bizRole.value}>\r\n                          {bizRole.value}\r\n                        </span>\r\n                      )}\r\n                    </td>\r\n                    <td className={styles.alignRight}>{formatMoney(+element.ookCorrectionSum)}</td>\r\n                    <td className={styles.alignRight} style={{ width: 'auto' }}>\r\n                      {!isNaN(taxGap) && !!taxGap && taxGap + '%'}\r\n                    </td>\r\n                    <td>\r\n                      <div className={styles.indicators}>\r\n                        {element.indicators.map(\r\n                          (ind: { name: string; value: string; value_months: string }) =>\r\n                            (ind.name === 'Krsb_Indicator'\r\n                              ? !isNaN(parseInt(ind?.value_months)) &&\r\n                                parseInt(ind?.value_months) > 0 &&\r\n                                ind.value &&\r\n                                ind.value !== '0'\r\n                              : !exceptionsIndicators.some((indicator) =>\r\n                                  ind.name.includes(indicator),\r\n                                ) &&\r\n                                ind.value &&\r\n                                ind.value !== '0') && (\r\n                              <img\r\n                                key={ind.name}\r\n                                src={briefToIcon.get(ind.name)}\r\n                                alt={ind.name}\r\n                                title={indicatorsNameMap.get(ind.name)}\r\n                                className={styles.indicatorsIcons}\r\n                              />\r\n                            ),\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    {graphStore?.graphExpandType !== 'Nds' ? (\r\n                      ''\r\n                    ) : (\r\n                      <>\r\n                        <td className={styles.alignRight}>\r\n                          {formatMoney(+element.vatDeductBuyer)}\r\n                        </td>\r\n                        <td className={styles.alignRight}>{formatMoney(+element.vatCalcSeller)}</td>\r\n                      </>\r\n                    )}\r\n                    {(graphStore?.graphExpandType === 'Nds' ||\r\n                      commodityFlow.some((item) => graphStore?.graphExpandType.includes(item))) && (\r\n                      <>\r\n                        <td className={styles.alignRight}>{formatMoney(+element.vatDeduct)}</td>\r\n                        <td className={styles.alignRight}>{formatMoney(+element.vatCalc)}</td>\r\n                      </>\r\n                    )}\r\n                    {graphStore?.graphExpandType === 'Abd' && (\r\n                      <>\r\n                        <td className={styles.alignRight}>{formatMoney(+element.debitSum)}</td>\r\n                        <td className={styles.alignRight}>{formatMoney(+element.creditSum)}</td>\r\n                      </>\r\n                    )}\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div className={styles.paginationWrapper}>\r\n          <Pagination\r\n            onChange={onPaginationChange}\r\n            pagination={pagination}\r\n            styles={{\r\n              container: styles.pagination,\r\n              active: styles.buttonActive,\r\n              select: styles.select,\r\n              selected: styles.selected,\r\n            }}\r\n            showFromTo\r\n            showPerPageOptions\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TableData;\r\n","import { IPagination } from '@fdc/vsa-react-lib';\r\nimport { CommonStoreType, GraphStoreType } from 'StoreTypes';\r\nimport Button from 'components/Button/Button';\r\nimport Icon from 'components/Icon';\r\nimport { inject, observer } from 'mobx-react';\r\nimport React, { PureComponent } from 'react';\r\nimport GroupDetailStore from 'stores/graph/graphStore/groupDetailStore';\r\nimport { ModalStoreType } from 'stores/modalStore';\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader } from '../Modal';\r\nimport { MODAL_DETAILED_GROUP } from '../constants/modalNames';\r\nimport styles from './DetailedGroup.module.scss';\r\nimport { ReactComponent as CloseIcon } from './assets/close.svg';\r\nimport { FiltersRow } from './components/FiltersRow/FiltersRow';\r\nimport TableData from './components/TableData';\r\n\r\ninterface DetailedGroupProps {\r\n  groupID: string;\r\n  category: string;\r\n  isLoading: boolean;\r\n  graphStore?: GraphStoreType;\r\n  commonStore?: CommonStoreType;\r\n  groupDetailStore: GroupDetailStore;\r\n  isVirtual?: boolean;\r\n  onClose: () => void;\r\n  modalStore?: ModalStoreType;\r\n}\r\n\r\n/**\r\n * Основной компонент для детализации группы\r\n */\r\n@inject('graphStore', 'commonStore', 'modalStore', 'groupDetailStore')\r\n@observer\r\nclass DetailedGroup extends PureComponent<DetailedGroupProps> {\r\n  constructor(props: DetailedGroupProps) {\r\n    super(props);\r\n  }\r\n\r\n  handleChangePagination = async (pagination: IPagination) => {\r\n    const { groupID, isVirtual, groupDetailStore } = this.props;\r\n    groupDetailStore.changePage(pagination, groupID, isVirtual);\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { graphStore, groupDetailStore, groupID, isVirtual } = this.props;\r\n    const { params } = groupDetailStore;\r\n    console.log('groups mounted', params?.pagination?.page);\r\n    graphStore.fetchDetailedGroup(groupID, groupDetailStore.params, isVirtual);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.groupDetailStore.resetStore();\r\n  }\r\n\r\n  componentDidCatch(err: any) {\r\n    console.log(err);\r\n  }\r\n\r\n  async componentDidUpdate(prevProps: DetailedGroupProps) {\r\n    const { groupDetailStore } = this.props;\r\n    const { params } = groupDetailStore;\r\n    console.log(\r\n      'groups updated',\r\n      params?.pagination?.page,\r\n      prevProps?.groupDetailStore?.params?.pagination?.page,\r\n    );\r\n  }\r\n\r\n  _outOfGroup = async () => {\r\n    const { graphStore, groupDetailStore, groupID, modalStore, category } = this.props;\r\n    const { extract, virtualExtract } = groupDetailStore;\r\n    if (category === 'VirtualGroup') {\r\n      await graphStore.fetchOutOfGroupVirtual(groupID, virtualExtract);\r\n    } else {\r\n      await graphStore.fetchOutOfGroup(groupID, extract);\r\n    }\r\n    modalStore?.closeModal(MODAL_DETAILED_GROUP);\r\n  };\r\n\r\n  _ungroupGroup = async () => {\r\n    const { graphStore, groupID, modalStore } = this.props;\r\n    await graphStore.nodeOutOfGroup(groupID);\r\n    graphStore.fetchGraph();\r\n    modalStore?.closeModal(MODAL_DETAILED_GROUP);\r\n  };\r\n\r\n  render() {\r\n    const { graphStore, groupDetailStore, onClose, commonStore, category, groupID, isVirtual } =\r\n      this.props;\r\n    const theme = commonStore?.appTheme;\r\n    const {\r\n      params,\r\n      extract,\r\n      virtualExtract,\r\n      changeExtract,\r\n      changeVirtualExtract,\r\n      resetParams,\r\n      changeFilter,\r\n    } = groupDetailStore;\r\n\r\n    const groupDetails = groupDetailStore.groupDetailedData;\r\n    const total = groupDetailStore.groupDetailedDataTotal;\r\n\r\n    const filtered = !!Object.values(params.groupFilter).filter((value) =>\r\n      Array.isArray(value) ? !!value.length : !!value,\r\n    ).length;\r\n\r\n    return (\r\n      <Modal className={styles.modal}>\r\n        <ModalHeader onClose={onClose}>\r\n          <span>Детализация группы</span>\r\n        </ModalHeader>\r\n        <ModalBody className={styles.body}>\r\n          <div className={styles.filterRow}>\r\n            {!graphStore?.visibleNodes && (\r\n              <>\r\n                <Button\r\n                  disabled={isVirtual ? !virtualExtract.length : !extract.length}\r\n                  onClick={this._outOfGroup}\r\n                >\r\n                  Извлечь\r\n                </Button>\r\n                {category !== 'VirtualGroup' && (\r\n                  <Button onClick={this._ungroupGroup}>Разгруппировать</Button>\r\n                )}\r\n              </>\r\n            )}\r\n            {filtered && (\r\n              <>\r\n                <div\r\n                  className={styles.resetFilter}\r\n                  onClick={() => resetParams(groupID, isVirtual)}\r\n                  title=\"Сбросить все фильтры\"\r\n                >\r\n                  <Icon name=\"filters\" size={16} theme={theme} />\r\n                  <CloseIcon className={styles.filterCross} />\r\n                </div>\r\n                <FiltersRow\r\n                  groupFilter={params.groupFilter}\r\n                  onChange={(groupFilter) => changeFilter(groupFilter, groupID, isVirtual)}\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n          {!graphStore.pending && (\r\n            <TableData\r\n              groupData={groupDetails}\r\n              category={category}\r\n              total={total}\r\n              pagination={{\r\n                page: params.pagination.page,\r\n                count: params.pagination.pageSize,\r\n                total,\r\n              }}\r\n              onPaginationChange={this.handleChangePagination}\r\n              groupFilter={params.groupFilter}\r\n              onFilterChange={(groupFilter) =>\r\n                changeFilter(groupFilter, groupID, isVirtual, params.pagination.pageSize)\r\n              }\r\n              onExtractChange={(extract) => changeExtract(extract)}\r\n              extract={extract}\r\n              groupID={groupID}\r\n              params={params}\r\n              onVirtualExtractChange={(virtualExtract) => changeVirtualExtract(virtualExtract)}\r\n              virtualExtract={virtualExtract}\r\n              isVirtual={category === 'VirtualGroup'}\r\n            />\r\n          )}\r\n        </ModalBody>\r\n        <ModalFooter>\r\n          <div className={styles.footer}>\r\n            <Button mode=\"secondary\" onClick={onClose}>\r\n              Закрыть\r\n            </Button>\r\n          </div>\r\n        </ModalFooter>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DetailedGroup;\r\n","export { default } from './DetailedGroup';\r\n"],"sourceRoot":""}