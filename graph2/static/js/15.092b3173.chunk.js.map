{"version":3,"sources":["components/modals/PotentialDamage/PotentialDamage.module.scss","components/modals/PotentialDamage/ActionButton/ActionButton.module.scss","components/modals/PotentialDamage/ActionButton/ActionButton.tsx","components/modals/PotentialDamage/PotentialDamage.tsx","components/modals/PotentialDamage/index.ts"],"names":["module","exports","ActionButton","props","label","onClick","isSecondary","title","disabled","className","styles","button","secondary","primary","defaultProps","PotentialDamage","inject","observer","_onChange","value","setState","potentialDamageValue","checkValue","_onReset","_saveDamage","a","graphStore","onClose","state","isError","test","savePotentialDamage","amount_of_damage","mainVertexId","amountOfDamage","this","commonStore","container","header","data-draggable","header_text","Icon","close_icon","name","theme","appTheme","data_container","Search","wrapperStyle","searchError","search","onChange","placeholder","autoFocus","withReset","onReset","error","data_button_container","data_action_button","PureComponent","action","valueTransform","toString","includes","replace","isNaN"],"mappings":"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","file":"static/js/15.092b3173.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PotentialDamage_container__30wjj\",\"header\":\"PotentialDamage_header__llt8x\",\"header_text\":\"PotentialDamage_header_text__3saC4\",\"close_icon\":\"PotentialDamage_close_icon__1d6Uo\",\"data_container\":\"PotentialDamage_data_container__853CJ\",\"data_action_button\":\"PotentialDamage_data_action_button__wW7p6\",\"data_button_container\":\"PotentialDamage_data_button_container__1Bsxa\",\"search\":\"PotentialDamage_search__1fMbo\",\"searchError\":\"PotentialDamage_searchError__teMkW\",\"error\":\"PotentialDamage_error__3KM23\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ActionButton_button__KUk0X\",\"primary\":\"ActionButton_primary__3FH2J\",\"secondary\":\"ActionButton_secondary__3bm0W\",\"disabled\":\"ActionButton_disabled__1P5oy\"};","import React from 'react';\r\nimport { actionButtonPropTypes } from './ActionButton.props';\r\nimport styles from './ActionButton.module.scss';\r\n\r\ntype ActionButtonProps = {\r\n  onClick: () => void;\r\n  label: any;\r\n  isSecondary?: boolean;\r\n  title?: string;\r\n  disabled?: boolean;\r\n};\r\n\r\n/**\r\n * Компонент кнопки действия в детализации связи НП\r\n *\r\n * @param {func} onClick - функция выщывающаяся при клике\r\n * @param {string} label - надпись на кнопке\r\n * @param {boolean} [isSecondary] - флаг показывающий нужно ли применять стили второстепенной\r\n * @param {string} title - подсказка к кнопке\r\n * кнопки\r\n */\r\nconst ActionButton = (props: ActionButtonProps) => {\r\n  const { label, onClick, isSecondary, title, disabled } = props;\r\n\r\n  return (\r\n    <button\r\n      className={`${styles.button} ${isSecondary ? styles.secondary : styles.primary} ${\r\n        disabled ? styles.disabled : ''\r\n      }`}\r\n      onClick={onClick}\r\n      title={title}\r\n      disabled={disabled}\r\n    >\r\n      <span className={styles.label}>{label}</span>\r\n    </button>\r\n  );\r\n};\r\n\r\nActionButton.propTypes = actionButtonPropTypes;\r\n\r\nActionButton.defaultProps = {\r\n  isSecondary: false,\r\n};\r\n\r\nexport default ActionButton;\r\n","import React, { PureComponent } from 'react';\r\nimport styles from './PotentialDamage.module.scss';\r\n\r\nimport { inject, observer } from 'mobx-react';\r\n\r\nimport ActionButton from './ActionButton';\r\n\r\nimport { GraphStoreType } from '../../../stores/graph/graphStore';\r\nimport Icon from '../../Icon';\r\nimport { CommonStoreType } from '../../../stores/common/commonStore';\r\nimport Search from '../../Search';\r\nimport { action } from 'mobx';\r\n\r\ntype PotentialDamageProps = {\r\n  graphStore?: GraphStoreType;\r\n  commonStore?: CommonStoreType;\r\n  [key: string]: any;\r\n};\r\n\r\ntype PotentialDamageState = {\r\n  potentialDamageValue: any;\r\n  isError: boolean;\r\n};\r\n\r\n/**\r\n * Компонент модального окна по вводу потенциального ущерба\r\n */\r\n@inject('graphStore', 'commonStore')\r\n@observer\r\nclass PotentialDamage extends PureComponent<PotentialDamageProps, PotentialDamageState> {\r\n  constructor(props: PotentialDamageProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      potentialDamageValue: this.props.graphStore?.amountOfDamage,\r\n      isError: false,\r\n    };\r\n  }\r\n\r\n  @action checkValue = (value: number) => {\r\n    let valueTransform = value;\r\n    if (value.toString().includes(',')) {\r\n      // @ts-ignore\r\n      valueTransform = valueTransform.toString().replace(',', '.');\r\n    }\r\n    if (isNaN(valueTransform)) {\r\n      // @ts-ignore\r\n      valueTransform = valueTransform.toString().replace(/[^.,\\d]+/g, '');\r\n    }\r\n    return valueTransform;\r\n  };\r\n\r\n  /**\r\n   * Метод изменяет значение поля ввода\r\n   */\r\n  _onChange = (value: number): void => {\r\n    this.setState({ potentialDamageValue: this.checkValue(value) });\r\n  };\r\n\r\n  /**\r\n   * Метод очищает поле ввода\r\n   */\r\n  _onReset = (): void => {\r\n    this.setState({ potentialDamageValue: '' });\r\n  };\r\n\r\n  _saveDamage = async () => {\r\n    const { graphStore, onClose } = this.props;\r\n    const { potentialDamageValue } = this.state;\r\n    this.setState({ isError: false });\r\n    let regexp = /^\\d*[,.]?\\d{1,2}$/;\r\n    if (!regexp.test(potentialDamageValue)) {\r\n      this.setState({ isError: true });\r\n    } else {\r\n      await graphStore?.savePotentialDamage(\r\n        { amount_of_damage: potentialDamageValue },\r\n        graphStore?.mainVertexId,\r\n      );\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Метод отрисовывает элементы на странице\r\n   */\r\n  render() {\r\n    const { onClose, commonStore } = this.props;\r\n    const { potentialDamageValue, isError } = this.state;\r\n\r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.header} data-draggable>\r\n          <span className={styles.header_text} data-draggable>\r\n            Потенциальный ущерб\r\n          </span>\r\n          <Icon\r\n            className={styles.close_icon}\r\n            name=\"close\"\r\n            onClick={onClose}\r\n            theme={commonStore?.appTheme}\r\n          />\r\n        </div>\r\n        <div className={styles.data_container}>\r\n          <span>Укажите сумму потенциального ущерба</span>\r\n          <Search\r\n            wrapperStyle={!isError ? styles.search : styles.searchError}\r\n            value={potentialDamageValue}\r\n            onChange={this._onChange}\r\n            placeholder={'Введите сумму потенциального ущерба'}\r\n            autoFocus\r\n            withReset\r\n            onReset={this._onReset}\r\n            theme={commonStore?.appTheme}\r\n          />\r\n          {isError && <div className={styles.error}>Должно быть указано число</div>}\r\n        </div>\r\n        <div className={styles.data_button_container}>\r\n          <div className={styles.data_action_button}>\r\n            <ActionButton\r\n              onClick={this._saveDamage}\r\n              disabled={!potentialDamageValue}\r\n              label=\"Сохранить\"\r\n            />\r\n          </div>\r\n          <div className={styles.data_action_button}>\r\n            <ActionButton onClick={onClose} isSecondary={true} label=\"Отменить\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PotentialDamage;\r\n","export { default } from './PotentialDamage';\r\n"],"sourceRoot":""}