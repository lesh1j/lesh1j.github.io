{"version":3,"sources":["components/TaxpayersLink/TaxpayersLink.module.scss","components/TaxpayersLink/TaxpayersLink.tsx","components/TaxpayersLink/index.ts","components/modals/DetailedCluster/components/ModalFilter/ModalFilter.module.scss","components/modals/DetailedCluster/components/Taxpayer/Taxpayer.module.scss","components/modals/DetailedCluster/components/SearchCluster/SearchCluster.module.scss","components/Plus/Plus.module.scss","components/modals/DetailedCluster/components/Accordion/Accordion.module.scss","components/modals/DetailedCluster/components/Link/Link.module.scss","components/modals/DetailedCluster/components/CommonItem/CommonItem.module.scss","components/modals/DetailedCluster/components/Subtype/Subtype.module.scss","components/modals/DetailedCluster/components/Type/Type.module.scss","components/modals/DetailedCluster/DetailedCluster.module.scss","components/modals/DetailedCluster/components/ModalFilter/ModalFilter.tsx","components/modals/DetailedCluster/components/Taxpayer/Taxpayer.tsx","components/modals/DetailedCluster/components/SearchCluster/SearchCluster.tsx","components/Plus/Plus.tsx","assets/icons/edge.svg","components/modals/DetailedCluster/components/Accordion/Accordion.tsx","assets/icons/peoples.svg","components/modals/DetailedCluster/components/Link/Link.tsx","components/modals/DetailedCluster/components/CommonItem/CommonItem.tsx","components/modals/DetailedCluster/components/Subtype/Subtype.tsx","components/modals/DetailedCluster/components/Type/Type.tsx","assets/icons/toexcel.svg","components/modals/DetailedCluster/DetailedCluster.tsx","components/modals/DetailedCluster/index.ts"],"names":["module","exports","TaxpayersLink","className","target","source","withArrow","props","styles","taxpayers","label","withLabel","taxpayer","seller","line","line__top","line__left","line__bottom","triangle","inn","name","buyer","inject","observer","innerRef","handleClickOutside","e","onClose","current","contains","createRef","document","addEventListener","this","removeEventListener","container","ref","modal","title","text","PureComponent","Taxpayer","_onClickNode","onSelect","wrapperStyle","selectedNP","wrapper","onClick","checkbox","Checkbox","checked","some","item","onChange","defaultProps","SearchCluster","origId","graphId","useStores","commonStore","clusterStore","changeSelectedTaxpayers","selectedTaxpayers","clusterTaxpayers","getClusterData","clearSelectedTaxpayers","useState","searchValue","setSearchValue","listIsOpen","setListIsOpen","setTaxpayers","useEffect","useRef","handleChangeSearchValue","a","length","lowerSearchValue","toLowerCase","filter","includes","useOutsideClick","Search","search","value","onSearch","autoSearchTimeout","placeholder","autoFocus","withReset","onReset","withButton","theme","appTheme","withTags","selectedList","onCloseTag","onOpenList","isOpenArrow","isLarge","listInner","map","key","Plus","isOpen","plus","line_1","line_2","_extends","Object","assign","i","arguments","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","d","SvgEdge","_ref","svgRef","titleId","xmlns","width","height","viewBox","id","ForwardRef","Accordion","children","level","links","allIsOpen","setAllIsOpen","onCheck","setIsOpen","accordion","header","arrow","openAll","body","SvgPeoples","Link","link","withCheckbox","typeId","subtypeId","openModal","modalStore","checkLink","openLink","MODAL_DETAILED_LINK_CLUSTER","linkId","link_id","detailsIsOpen","setDetailsIsOpen","common","common_items","slice","common_count","common__link","common__icon","common__label","details","details__close","details__label","details__item","details__all","source_inn","source_name","source_type","target_inn","target_name","target_type","icon","data-tip","data-for","place","type","effect","delayShow","CommonItem","commonItem","checkCommon","common_inn","common_name","Subtype","subtype","checkSubtype","links_count","subtype_name","subtype_id","commonItems","Type","checkType","type_name","type_id","subtypes","SvgToexcel","fill","DetailedCluster","clusterId","setSearchCluster","graphStore","previouslyFetchedGraphId","ableEdit","visibleNodes","getExportCluster","showLinksBetweenTaxpayers","changeShowLinksBetweenTaxpayers","getClusterTaxpayers","clusterData","setClusterFilters","checkAll","allIsChecked","closeModal","types","hasLinks","reduce","acc","onFilter","cluster_index","modalNames","Modal","withFooter","actions","actions__line","disabled","undefined","export","dateTime","Date","toLocaleString","replaceAll","noResults","bottomBar","Button","mode"],"mappings":"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","file":"static/js/9.d5f64dc3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"taxpayers\":\"TaxpayersLink_taxpayers__DuuDl\",\"withLabel\":\"TaxpayersLink_withLabel__2-zth\",\"line\":\"TaxpayersLink_line__1hSUg\",\"line__top\":\"TaxpayersLink_line__top__27797\",\"line__left\":\"TaxpayersLink_line__left__mZfVL\",\"line__bottom\":\"TaxpayersLink_line__bottom__30oVu\",\"triangle\":\"TaxpayersLink_triangle__yzfvv\",\"taxpayer\":\"TaxpayersLink_taxpayer__eeHHu\",\"label\":\"TaxpayersLink_label__2NlW-\"};","import React from 'react';\r\nimport { ITaxpayersLinkProps } from './TaxpayersLink.props';\r\nimport styles from './TaxpayersLink.module.scss';\r\n\r\nconst TaxpayersLink = ({\r\n  className,\r\n  target,\r\n  source,\r\n  withArrow = true,\r\n  ...props\r\n}: ITaxpayersLinkProps) => {\r\n  return (\r\n    <div\r\n      className={`${className} ${styles.taxpayers} ${source.label && styles.withLabel}`}\r\n      {...props}\r\n    >\r\n      <div className={`${styles.taxpayer} ${styles.seller}`}>\r\n        <div className={`${styles.line} ${styles.line__top}`}></div>\r\n        <div className={`${styles.line} ${styles.line__left}`}></div>\r\n        <div className={`${styles.line} ${styles.line__bottom}`}>\r\n          {withArrow && <div className={styles.triangle}></div>}\r\n        </div>\r\n\r\n        {source.label && <span className={styles.label}>{source.label}</span>}\r\n        <span className={styles.inn}>{source.inn}</span>\r\n        <span className={styles.name}>{source.name ?? 'Наименование не определено'}</span>\r\n      </div>\r\n\r\n      <div className={`${styles.taxpayer} ${styles.buyer}`}>\r\n        {target.label && <span className={styles.label}>{target.label}</span>}\r\n        <span className={styles.inn}>{target.inn}</span>\r\n        <span className={styles.name}>{target.name ?? 'Наименование не определено'}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaxpayersLink;\r\n","export { default } from './TaxpayersLink';\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ModalFilter_container__3N7CK\",\"modal\":\"ModalFilter_modal__37cty\",\"title\":\"ModalFilter_title__32wLP\",\"text\":\"ModalFilter_text__248_X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Taxpayer_wrapper__10mH_\",\"main\":\"Taxpayer_main__1-Si9\",\"additional\":\"Taxpayer_additional__1rgCj\",\"fadeIn\":\"Taxpayer_fadeIn__o7jEu\",\"additionalData\":\"Taxpayer_additionalData__30mvC\",\"additionalDataContainer\":\"Taxpayer_additionalDataContainer__2utVw\",\"dataName\":\"Taxpayer_dataName__UmyxS\",\"dataValue\":\"Taxpayer_dataValue__AZXWQ\",\"additionalButtonContainer\":\"Taxpayer_additionalButtonContainer__2JkM2\",\"additionalButtonLabel\":\"Taxpayer_additionalButtonLabel__Bbs3s\",\"additionalInfoIcon\":\"Taxpayer_additionalInfoIcon__1wwGU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SearchCluster_container__3d_Rg\",\"label\":\"SearchCluster_label__SLFh6\",\"search\":\"SearchCluster_search__TDp8z\",\"listInner\":\"SearchCluster_listInner__8NTE3\",\"loader\":\"SearchCluster_loader__2T51A\",\"list\":\"SearchCluster_list__zl4RQ\",\"error\":\"SearchCluster_error__2d-ht\",\"errorText\":\"SearchCluster_errorText__2cXj_\",\"item\":\"SearchCluster_item__37-nn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"plus\":\"Plus_plus__HAwAA\",\"line\":\"Plus_line__3ZY2B\",\"line_2\":\"Plus_line_2__2-ZpG\",\"isOpen\":\"Plus_isOpen__1Yqwk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"accordion\":\"Accordion_accordion__3Xtne\",\"level_2\":\"Accordion_level_2__3ZSXS\",\"header\":\"Accordion_header__6h-0K\",\"isOpen\":\"Accordion_isOpen__3Z1Dd\",\"level_1\":\"Accordion_level_1__2Z8AK\",\"level_3\":\"Accordion_level_3__3RW8M\",\"arrow\":\"Accordion_arrow__UP7LL\",\"name\":\"Accordion_name__16S7Y\",\"openAll\":\"Accordion_openAll__xAvfR\",\"links\":\"Accordion_links__2aMop\",\"body\":\"Accordion_body__YA_7V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Link_link__1pE6S\",\"body\":\"Link_body__2IJe9\",\"common\":\"Link_common__2CYze\",\"common__link\":\"Link_common__link__3MZ7p\",\"common__icon\":\"Link_common__icon__WnhLZ\",\"details\":\"Link_details__3VbgY\",\"details__close\":\"Link_details__close__21v2-\",\"details__label\":\"Link_details__label__Xgnws\",\"details__all\":\"Link_details__all__1w0XN\",\"icon\":\"Link_icon__lRtsK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"links\":\"CommonItem_links__K0X6R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"subtype\":\"Subtype_subtype__2qXjX\",\"links\":\"Subtype_links__DnI_u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"type\":\"Type_type__1mYhP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DetailedCluster_container__326zz\",\"search\":\"DetailedCluster_search__2nKv4\",\"actions__line\":\"DetailedCluster_actions__line__34-Gw\",\"export\":\"DetailedCluster_export__2EwaG\",\"loader\":\"DetailedCluster_loader__3Krnr\",\"checkbox\":\"DetailedCluster_checkbox__v3Gci\",\"noResults\":\"DetailedCluster_noResults__31wmg\",\"types\":\"DetailedCluster_types__2QiPt\",\"bottomBar\":\"DetailedCluster_bottomBar__1wrQU\"};","import React, { createRef, PureComponent, RefObject } from 'react';\r\nimport styles from './ModalFilter.module.scss';\r\n\r\nimport { inject, observer } from 'mobx-react';\r\n\r\nimport { GraphStoreType } from 'StoreTypes';\r\n\r\ntype ModalFilterProps = {\r\n  onClose: () => void;\r\n\r\n  graphStore?: GraphStoreType;\r\n};\r\n\r\n/**\r\n * Компонент модального информационного окна о успешной фильтрации графа по кластеру\r\n */\r\n@inject('graphStore')\r\n@observer\r\nclass ModalFilter extends PureComponent<ModalFilterProps> {\r\n  constructor(props: ModalFilterProps) {\r\n    super(props);\r\n\r\n    this.innerRef = createRef();\r\n  }\r\n  innerRef: RefObject<HTMLDivElement>;\r\n\r\n  /**\r\n   * Метод закрывает окошки при клике вне окошек\r\n   */\r\n  handleClickOutside = (e: MouseEvent) => {\r\n    const { onClose } = this.props;\r\n    if (this.innerRef.current && !this.innerRef.current.contains(e.target as Node)) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('click', this.handleClickOutside);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('click', this.handleClickOutside);\r\n  }\r\n\r\n  /**\r\n   * Метод отрисовывает элементы на странице\r\n   */\r\n  render() {\r\n    return (\r\n      <div className={`${styles.container}`} ref={this.innerRef}>\r\n        <div className={styles.modal}>\r\n          <span className={styles.title}>Фильтр сохранен.</span>\r\n          <span className={styles.text}>Кластер отображается</span>\r\n          <span className={styles.text}>с учетом фильтра.</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModalFilter;\r\n","import React, { PureComponent } from 'react';\r\nimport { taxpayerPropTypes } from './Taxpayer.props';\r\nimport styles from './Taxpayer.module.scss';\r\n\r\nimport { ClusterTaxpayer } from 'DataTypes';\r\nimport { observer } from 'mobx-react';\r\nimport Checkbox from 'components/Checkbox';\r\n\r\ninterface TaxpayerProps {\r\n  taxpayer: ClusterTaxpayer;\r\n  onSelect: (data: any) => void;\r\n  wrapperStyle?: string;\r\n  theme?: string;\r\n  selectedNP?: any;\r\n}\r\n\r\n/**\r\n * Компонент НП для списка НП\r\n */\r\n@observer\r\nclass Taxpayer extends PureComponent<TaxpayerProps> {\r\n  static propTypes = taxpayerPropTypes;\r\n\r\n  static defaultProps = {\r\n    wrapperStyle: '',\r\n  };\r\n\r\n  /**\r\n   * Метод активации поиска\r\n   */\r\n  _onClickNode = (): void => {\r\n    const { onSelect, taxpayer } = this.props;\r\n    onSelect(taxpayer.inn);\r\n  };\r\n\r\n  /**\r\n   * Метод отрисовывает элементы\r\n   */\r\n  render() {\r\n    const {\r\n      props: { taxpayer, wrapperStyle, selectedNP },\r\n    } = this;\r\n\r\n    return (\r\n      <div\r\n        className={`${styles.wrapper} ${wrapperStyle}`}\r\n        onClick={this._onClickNode}\r\n        title={'Нажмите для поиска'}\r\n      >\r\n        <div className={styles.checkbox}>\r\n          <Checkbox\r\n            checked={selectedNP.some((item: any) => item === taxpayer.inn)}\r\n            name={taxpayer.inn}\r\n            onChange={this._onClickNode}\r\n          ></Checkbox>\r\n        </div>\r\n        <span className={styles.inn}>{taxpayer.inn}</span>\r\n        <span className={styles.name}>{taxpayer.name}</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Taxpayer;\r\n","import React, { useEffect, useRef, useState } from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { useOutsideClick, useStores } from 'hooks';\r\n\r\nimport { ClusterTaxpayer } from 'DataTypes';\r\n\r\nimport Taxpayer from '../Taxpayer/Taxpayer';\r\nimport Search from 'components/Search';\r\n\r\nimport styles from './SearchCluster.module.scss';\r\n\r\ninterface IProps {\r\n  origId: string;\r\n  graphId: string;\r\n}\r\n\r\nconst SearchCluster = observer(({ origId, graphId }: IProps) => {\r\n  const {\r\n    commonStore,\r\n    clusterStore: {\r\n      changeSelectedTaxpayers,\r\n      selectedTaxpayers,\r\n      clusterTaxpayers,\r\n      getClusterData,\r\n      clearSelectedTaxpayers,\r\n    },\r\n  } = useStores();\r\n\r\n  const [searchValue, setSearchValue] = useState<string>('');\r\n  const [listIsOpen, setListIsOpen] = useState<boolean>(false);\r\n  const [taxpayers, setTaxpayers] = useState<ClusterTaxpayer[]>(clusterTaxpayers);\r\n\r\n  useEffect(() => {\r\n    setTaxpayers([...clusterTaxpayers]);\r\n  }, [clusterTaxpayers]);\r\n\r\n  const innerRef = useRef(null);\r\n\r\n  const handleChangeSearchValue = async (searchValue: string) => {\r\n    setSearchValue(searchValue);\r\n\r\n    if (searchValue.length === 0) {\r\n      setListIsOpen(false);\r\n      setTaxpayers(clusterTaxpayers);\r\n      return;\r\n    }\r\n\r\n    setListIsOpen(true);\r\n\r\n    const lowerSearchValue = searchValue.toLowerCase();\r\n\r\n    setTaxpayers(\r\n      clusterTaxpayers.filter(\r\n        ({ inn, name }) =>\r\n          inn?.toLowerCase().includes(lowerSearchValue) ||\r\n          name?.toLowerCase().includes(lowerSearchValue),\r\n      ),\r\n    );\r\n  };\r\n\r\n  const handleSearch = () => {\r\n    getClusterData(origId, graphId, true);\r\n  };\r\n\r\n  const handleResetSearchValue = () => {\r\n    setSearchValue('');\r\n    clearSelectedTaxpayers();\r\n    getClusterData(origId, graphId);\r\n  };\r\n\r\n  useOutsideClick(innerRef, () => setListIsOpen(false));\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.label}>\r\n        Поиск среди ИНН или наименования налогоплательщика в кластере\r\n      </div>\r\n\r\n      <div ref={innerRef}>\r\n        <Search\r\n          wrapperStyle={styles.search}\r\n          value={searchValue}\r\n          onChange={handleChangeSearchValue}\r\n          onSearch={handleSearch}\r\n          autoSearchTimeout={700}\r\n          placeholder={'Введите ИНН для поиска'}\r\n          autoFocus\r\n          withReset\r\n          onReset={handleResetSearchValue}\r\n          withButton\r\n          theme={commonStore?.appTheme}\r\n          withTags\r\n          selectedList={selectedTaxpayers}\r\n          onCloseTag={(inn) => changeSelectedTaxpayers(inn)}\r\n          withArrow\r\n          onOpenList={() => setListIsOpen(!listIsOpen)}\r\n          isOpenArrow={listIsOpen}\r\n          isLarge\r\n        />\r\n\r\n        {listIsOpen && (\r\n          <div className={styles.listInner}>\r\n            {taxpayers.map((item) => (\r\n              <Taxpayer\r\n                key={'nodes-list-item' + item.inn}\r\n                onSelect={changeSelectedTaxpayers}\r\n                taxpayer={item}\r\n                theme={commonStore?.appTheme}\r\n                selectedNP={selectedTaxpayers}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default SearchCluster;\r\n","import React from 'react';\r\nimport { IPlusProps } from './Plus.props';\r\n\r\nimport styles from './Plus.module.scss';\r\n\r\nconst Plus = ({ className, isOpen = false, ...props }: IPlusProps) => {\r\n  return (\r\n    <div className={`${styles.plus} ${className}`} {...props}>\r\n      <div className={`${styles.line} ${styles.line_1}`}></div>\r\n      <div className={`${styles.line} ${styles.line_2} ${isOpen && styles.isOpen}`}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Plus;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M13.06 8.10999L14.475 9.52499C15.1251 10.175 15.6408 10.9467 15.9926 11.796C16.3444 12.6454 16.5255 13.5557 16.5255 14.475C16.5255 15.3943 16.3444 16.3046 15.9926 17.1539C15.6408 18.0033 15.1251 18.775 14.475 19.425L14.121 19.778C12.8082 21.0908 11.0276 21.8283 9.17101 21.8283C7.3144 21.8283 5.53383 21.0908 4.22101 19.778C2.90819 18.4652 2.17065 16.6846 2.17065 14.828C2.17065 12.9714 2.90819 11.1908 4.22101 9.87799L5.63601 11.293C5.16838 11.7565 4.79692 12.3079 4.54294 12.9154C4.28896 13.5229 4.15748 14.1746 4.15604 14.833C4.1546 15.4915 4.28323 16.1437 4.53454 16.7523C4.78585 17.3609 5.1549 17.9139 5.62049 18.3795C6.08609 18.8451 6.63906 19.2141 7.24767 19.4655C7.85628 19.7168 8.50853 19.8454 9.16698 19.844C9.82543 19.8425 10.4771 19.711 11.0846 19.4571C11.6921 19.2031 12.2435 18.8316 12.707 18.364L13.061 18.01C13.9984 17.0724 14.5249 15.8008 14.5249 14.475C14.5249 13.1492 13.9984 11.8776 13.061 10.94L11.646 9.52499L13.061 8.11099L13.06 8.10999ZM19.778 14.121L18.364 12.707C18.8316 12.2434 19.2031 11.6921 19.4571 11.0846C19.7111 10.4771 19.8425 9.8254 19.844 9.16695C19.8454 8.5085 19.7168 7.85625 19.4655 7.24765C19.2142 6.63904 18.8451 6.08607 18.3795 5.62047C17.9139 5.15487 17.361 4.78583 16.7524 4.53451C16.1437 4.2832 15.4915 4.15457 14.833 4.15602C14.1746 4.15746 13.5229 4.28894 12.9154 4.54292C12.3079 4.79689 11.7566 5.16836 11.293 5.63599L10.939 5.98999C10.0017 6.92763 9.47508 8.19917 9.47508 9.52499C9.47508 10.8508 10.0017 12.1223 10.939 13.06L12.354 14.475L10.939 15.889L9.52501 14.475C8.87493 13.825 8.35925 13.0533 8.00742 12.2039C7.65559 11.3546 7.47451 10.4443 7.47451 9.52499C7.47451 8.60567 7.65559 7.69536 8.00742 6.84604C8.35925 5.99671 8.87493 5.22501 9.52501 4.57499L9.87901 4.22199C11.1918 2.90917 12.9724 2.17163 14.829 2.17163C16.6856 2.17163 18.4662 2.90917 19.779 4.22199C21.0918 5.53481 21.8294 7.31538 21.8294 9.17199C21.8294 11.0286 21.0918 12.8092 19.779 14.122L19.778 14.121Z\"\n});\n\nfunction SvgEdge(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEdge);\nexport default __webpack_public_path__ + \"static/media/edge.3356c6b6.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useState } from 'react';\r\nimport { IAccordionProps } from './Accordion.props';\r\n\r\nimport Checkbox from 'components/Checkbox';\r\nimport Plus from 'components/Plus';\r\n\r\nimport { ReactComponent as ArrowIcon } from 'assets/icons/arrow.svg';\r\nimport { ReactComponent as EdgeIcon } from 'assets/icons/edge.svg';\r\n\r\nimport styles from './Accordion.module.scss';\r\n\r\nconst Accordion = ({\r\n  className,\r\n  children,\r\n  level,\r\n  name,\r\n  links,\r\n  allIsOpen,\r\n  setAllIsOpen,\r\n  checked,\r\n  onCheck,\r\n  ...props\r\n}: IAccordionProps) => {\r\n  const [isOpen, setIsOpen] = useState<boolean>(!!allIsOpen);\r\n\r\n  useEffect(() => {\r\n    level !== 1 && setIsOpen(!!allIsOpen);\r\n  }, [allIsOpen]);\r\n\r\n  return (\r\n    <div className={`${className} ${styles.accordion} ${styles['level_' + level]}`} {...props}>\r\n      <div className={`${styles.header} ${styles['level_' + level]} ${isOpen && styles.isOpen}`}>\r\n        {level === 1 && (\r\n          <div\r\n            className={`${styles.arrow} ${isOpen && styles.isOpen}`}\r\n            onClick={() => setIsOpen(!isOpen)}\r\n          >\r\n            <ArrowIcon />\r\n          </div>\r\n        )}\r\n\r\n        <div className={styles.checkbox}>\r\n          <Checkbox className={styles.checkbox} onChange={onCheck} checked={checked} />\r\n        </div>\r\n\r\n        <div className={styles.plus} onClick={() => setIsOpen(!isOpen)}>\r\n          <Plus isOpen={isOpen} />\r\n        </div>\r\n\r\n        <div\r\n          className={`${styles.name} ${styles['level_' + level]}`}\r\n          onClick={() => setIsOpen(!isOpen)}\r\n        >\r\n          {name}\r\n        </div>\r\n\r\n        {level === 1 && isOpen && setAllIsOpen && (\r\n          <div className={styles.openAll} onClick={() => setAllIsOpen(!allIsOpen)}>\r\n            <Plus isOpen={allIsOpen} /> Раскрыть все связи\r\n          </div>\r\n        )}\r\n\r\n        <div className={styles.links}>\r\n          <EdgeIcon />\r\n          <span>{links}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {isOpen && <div className={`${styles.body} ${styles['level_' + level]}`}>{children}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Accordion;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 11C13.3261 11 14.5979 11.5268 15.5355 12.4645C16.4732 13.4021 17 14.6739 17 16V22H15V16C15 15.2348 14.7077 14.4985 14.1827 13.9417C13.6578 13.385 12.9399 13.0499 12.176 13.005L12 13C11.2348 13 10.4985 13.2923 9.94174 13.8173C9.38499 14.3422 9.04989 15.0601 9.005 15.824L9 16V22H7V16C7 14.6739 7.52678 13.4021 8.46447 12.4645C9.40215 11.5268 10.6739 11 12 11ZM5.5 14C5.779 14 6.05 14.033 6.31 14.094C6.13902 14.603 6.03777 15.1328 6.009 15.669L6 16V16.086C5.88505 16.0449 5.76549 16.018 5.644 16.006L5.5 16C5.12712 16 4.76761 16.1389 4.49158 16.3896C4.21555 16.6403 4.0428 16.9848 4.007 17.356L4 17.5V22H2V17.5C2 16.5717 2.36875 15.6815 3.02513 15.0251C3.6815 14.3687 4.57174 14 5.5 14ZM18.5 14C19.4283 14 20.3185 14.3687 20.9749 15.0251C21.6313 15.6815 22 16.5717 22 17.5V22H20V17.5C20 17.1271 19.8611 16.7676 19.6104 16.4916C19.3597 16.2156 19.0152 16.0428 18.644 16.007L18.5 16C18.325 16 18.157 16.03 18 16.085V16C18 15.334 17.892 14.694 17.691 14.096C17.95 14.033 18.221 14 18.5 14ZM5.5 8C6.16304 8 6.79893 8.26339 7.26777 8.73223C7.73661 9.20107 8 9.83696 8 10.5C8 11.163 7.73661 11.7989 7.26777 12.2678C6.79893 12.7366 6.16304 13 5.5 13C4.83696 13 4.20107 12.7366 3.73223 12.2678C3.26339 11.7989 3 11.163 3 10.5C3 9.83696 3.26339 9.20107 3.73223 8.73223C4.20107 8.26339 4.83696 8 5.5 8ZM18.5 8C19.163 8 19.7989 8.26339 20.2678 8.73223C20.7366 9.20107 21 9.83696 21 10.5C21 11.163 20.7366 11.7989 20.2678 12.2678C19.7989 12.7366 19.163 13 18.5 13C17.837 13 17.2011 12.7366 16.7322 12.2678C16.2634 11.7989 16 11.163 16 10.5C16 9.83696 16.2634 9.20107 16.7322 8.73223C17.2011 8.26339 17.837 8 18.5 8ZM5.5 10C5.36739 10 5.24021 10.0527 5.14645 10.1464C5.05268 10.2402 5 10.3674 5 10.5C5 10.6326 5.05268 10.7598 5.14645 10.8536C5.24021 10.9473 5.36739 11 5.5 11C5.63261 11 5.75979 10.9473 5.85355 10.8536C5.94732 10.7598 6 10.6326 6 10.5C6 10.3674 5.94732 10.2402 5.85355 10.1464C5.75979 10.0527 5.63261 10 5.5 10ZM18.5 10C18.3674 10 18.2402 10.0527 18.1464 10.1464C18.0527 10.2402 18 10.3674 18 10.5C18 10.6326 18.0527 10.7598 18.1464 10.8536C18.2402 10.9473 18.3674 11 18.5 11C18.6326 11 18.7598 10.9473 18.8536 10.8536C18.9473 10.7598 19 10.6326 19 10.5C19 10.3674 18.9473 10.2402 18.8536 10.1464C18.7598 10.0527 18.6326 10 18.5 10ZM12 2C13.0609 2 14.0783 2.42143 14.8284 3.17157C15.5786 3.92172 16 4.93913 16 6C16 7.06087 15.5786 8.07828 14.8284 8.82843C14.0783 9.57857 13.0609 10 12 10C10.9391 10 9.92172 9.57857 9.17157 8.82843C8.42143 8.07828 8 7.06087 8 6C8 4.93913 8.42143 3.92172 9.17157 3.17157C9.92172 2.42143 10.9391 2 12 2ZM12 4C11.4696 4 10.9609 4.21071 10.5858 4.58579C10.2107 4.96086 10 5.46957 10 6C10 6.53043 10.2107 7.03914 10.5858 7.41421C10.9609 7.78929 11.4696 8 12 8C12.5304 8 13.0391 7.78929 13.4142 7.41421C13.7893 7.03914 14 6.53043 14 6C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4Z\"\n});\n\nfunction SvgPeoples(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPeoples);\nexport default __webpack_public_path__ + \"static/media/peoples.86d4b9d6.svg\";\nexport { ForwardRef as ReactComponent };","import { useStores } from 'hooks';\r\nimport { observer } from 'mobx-react';\r\nimport React, { useState } from 'react';\r\nimport { ILinkProps } from './Link.props';\r\n\r\nimport Checkbox from 'components/Checkbox';\r\nimport TaxpayersLink from 'components/TaxpayersLink';\r\n\r\nimport { ReactComponent as CloseIcon } from 'assets/icons/close.svg';\r\nimport { ReactComponent as EdgeIcon } from 'assets/icons/edge.svg';\r\nimport { ReactComponent as PeoplesIcon } from 'assets/icons/peoples.svg';\r\n\r\nimport { MODAL_DETAILED_LINK_CLUSTER } from 'components/modals/constants/modalNames';\r\n\r\nimport ReactTooltip from 'react-tooltip';\r\nimport styles from './Link.module.scss';\r\n\r\nconst DETAILS_LENGTH = 5;\r\n\r\nconst Link = observer(\r\n  ({ className, link, withCheckbox, typeId, subtypeId, ...props }: ILinkProps) => {\r\n    const {\r\n      modalStore: { openModal },\r\n      clusterStore: { checkLink },\r\n    } = useStores();\r\n\r\n    const openLink = () => {\r\n      openModal(MODAL_DETAILED_LINK_CLUSTER, {\r\n        linkId: link.link_id,\r\n      });\r\n    };\r\n\r\n    const [detailsIsOpen, setDetailsIsOpen] = useState<boolean>(false);\r\n\r\n    const common = link.common_items?.slice(0, DETAILS_LENGTH);\r\n\r\n    return (\r\n      <div className={`${className} ${styles.link}`} {...props}>\r\n        {withCheckbox && (\r\n          <div className={styles.checkbox}>\r\n            <Checkbox\r\n              className={styles.checkbox}\r\n              onChange={() => checkLink(typeId, subtypeId, link.link_id)}\r\n              checked={link.checked}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        <div className={styles.body}>\r\n          {common && link.common_count && (\r\n            <div className={styles.common}>\r\n              <span\r\n                className={styles.common__link}\r\n                onClick={() => setDetailsIsOpen(!detailsIsOpen)}\r\n              >\r\n                <span className={styles.common__icon}>\r\n                  <PeoplesIcon />\r\n                </span>\r\n\r\n                <span className={styles.common__label}>Общих: {link.common_count}</span>\r\n              </span>\r\n\r\n              {detailsIsOpen && (\r\n                <div className={styles.details}>\r\n                  <button className={styles.details__close} onClick={() => setDetailsIsOpen(false)}>\r\n                    <CloseIcon />\r\n                  </button>\r\n\r\n                  <div className={styles.details__label}>\r\n                    {common.length} общих НП из {link.common_count}\r\n                  </div>\r\n\r\n                  {common.map((item) => (\r\n                    <div key={`cluster_common_detail_${item}`} className={styles.details__item}>\r\n                      {item}\r\n                    </div>\r\n                  ))}\r\n\r\n                  {link.common_count > DETAILS_LENGTH && (\r\n                    <div className={styles.details__all} onClick={openLink}>\r\n                      Показать всех\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <TaxpayersLink\r\n            source={{ inn: link.source_inn, name: link.source_name, label: link.source_type }}\r\n            target={{ inn: link.target_inn, name: link.target_name, label: link.target_type }}\r\n            withArrow={false}\r\n          />\r\n        </div>\r\n\r\n        <div className={styles.icon} onClick={openLink}>\r\n          <EdgeIcon data-tip=\"React-tooltip\" data-for=\"openClusterLink\" />\r\n        </div>\r\n        <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" id=\"openClusterLink\" delayShow={200}>\r\n          Просмотр и корректировка связи между налогоплательщиками\r\n        </ReactTooltip>\r\n      </div>\r\n    );\r\n  },\r\n);\r\n\r\nexport default Link;\r\n","import React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { useStores } from 'hooks';\r\n\r\nimport { ICommonItemProps } from './CommonItem.props';\r\n\r\nimport Accordion from '../Accordion';\r\nimport Link from '../Link';\r\n\r\nimport styles from './CommonItem.module.scss';\r\n\r\nconst CommonItem = observer(\r\n  ({ className, commonItem, allIsOpen, typeId, subtypeId, ...props }: ICommonItemProps) => {\r\n    const {\r\n      clusterStore: { checkCommon },\r\n    } = useStores();\r\n\r\n    return (\r\n      <Accordion\r\n        className={`${className} ${styles.item}`}\r\n        {...props}\r\n        level={3}\r\n        links={commonItem.links.length}\r\n        name={`${commonItem.common_inn} ${commonItem.common_name}`}\r\n        allIsOpen={allIsOpen}\r\n        checked={commonItem.checked}\r\n        onCheck={() => checkCommon(typeId, subtypeId, commonItem.common_inn)}\r\n      >\r\n        {commonItem.links && (\r\n          <div className={styles.links}>\r\n            {commonItem.links.map((link) => {\r\n              return (\r\n                <Link\r\n                  key={`cluster_link_${link.link_id}`}\r\n                  link={link}\r\n                  typeId={typeId}\r\n                  subtypeId={subtypeId}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </Accordion>\r\n    );\r\n  },\r\n);\r\n\r\nexport default CommonItem;\r\n","import React from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { useStores } from 'hooks';\r\n\r\nimport { ISubtypeProps } from './Subtype.props';\r\n\r\nimport Accordion from '../Accordion';\r\nimport CommonItem from '../CommonItem';\r\nimport Link from '../Link';\r\n\r\nimport styles from './Subtype.module.scss';\r\n\r\nconst Subtype = observer(({ className, typeId, subtype, allIsOpen, ...props }: ISubtypeProps) => {\r\n  const {\r\n    clusterStore: { checkSubtype },\r\n  } = useStores();\r\n\r\n  return (\r\n    <Accordion\r\n      className={`${className} ${styles.subtype}`}\r\n      {...props}\r\n      level={2}\r\n      links={subtype.links_count}\r\n      name={subtype.subtype_name}\r\n      allIsOpen={allIsOpen}\r\n      checked={subtype.checked}\r\n      onCheck={() => checkSubtype(typeId, subtype.subtype_id)}\r\n    >\r\n      {subtype.common_items && (\r\n        <div className={styles.commonItems}>\r\n          {subtype.common_items.map((commonItem) => {\r\n            return (\r\n              <CommonItem\r\n                key={`cluster_commonItem_${commonItem.common_name}`}\r\n                commonItem={commonItem}\r\n                allIsOpen={allIsOpen}\r\n                subtypeId={subtype.subtype_id}\r\n                typeId={typeId}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {subtype.links && (\r\n        <div className={styles.links}>\r\n          {subtype.links.map((link) => {\r\n            return (\r\n              <Link\r\n                key={`cluster_link_${link.link_id}`}\r\n                link={link}\r\n                withCheckbox\r\n                subtypeId={subtype.subtype_id}\r\n                typeId={typeId}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </Accordion>\r\n  );\r\n});\r\n\r\nexport default Subtype;\r\n","import React, { useState } from 'react';\r\nimport { observer } from 'mobx-react';\r\nimport { useStores } from 'hooks';\r\n\r\nimport { ITypeProps } from './Type.props';\r\n\r\nimport Accordion from '../Accordion';\r\nimport Subtype from '../Subtype';\r\n\r\nimport styles from './Type.module.scss';\r\n\r\nconst Type = observer(({ className, type, ...props }: ITypeProps) => {\r\n  const {\r\n    clusterStore: { checkType },\r\n  } = useStores();\r\n\r\n  const [allIsOpen, setAllIsOpen] = useState<boolean>(false);\r\n\r\n  return (\r\n    <Accordion\r\n      className={`${className} ${styles.type}`}\r\n      {...props}\r\n      level={1}\r\n      links={type.links_count}\r\n      name={type.type_name}\r\n      allIsOpen={allIsOpen}\r\n      setAllIsOpen={setAllIsOpen}\r\n      checked={type.checked}\r\n      onCheck={() => checkType(type.type_id)}\r\n    >\r\n      {type.subtypes && (\r\n        <div className={styles.subtypes}>\r\n          {type.subtypes.map((subtype) => {\r\n            return (\r\n              <Subtype\r\n                key={`cluster_subtype_${subtype.subtype_name}`}\r\n                subtype={subtype}\r\n                allIsOpen={allIsOpen}\r\n                typeId={type.type_id}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </Accordion>\r\n  );\r\n});\r\n\r\nexport default Type;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M2.85902 2.87697L15.429 1.08197C15.5 1.07179 15.5723 1.07699 15.641 1.0972C15.7098 1.11741 15.7734 1.15216 15.8275 1.1991C15.8817 1.24605 15.9251 1.30408 15.9549 1.36928C15.9846 1.43447 16 1.5053 16 1.57697V22.423C16 22.4945 15.9846 22.5653 15.9549 22.6304C15.9252 22.6955 15.8819 22.7535 15.8279 22.8004C15.7738 22.8473 15.7103 22.8821 15.6417 22.9024C15.5731 22.9227 15.5009 22.928 15.43 22.918L2.85802 21.123C2.61964 21.089 2.40152 20.9702 2.24371 20.7883C2.08591 20.6065 1.99903 20.3738 1.99902 20.133V3.86697C1.99903 3.62618 2.08591 3.39348 2.24371 3.21161C2.40152 3.02975 2.61964 2.91092 2.85802 2.87697H2.85902ZM4.00002 4.73497V19.265L14 20.694V3.30597L4.00002 4.73497ZM17 19H20V4.99997H17V2.99997H21C21.2652 2.99997 21.5196 3.10533 21.7071 3.29286C21.8947 3.4804 22 3.73475 22 3.99997V20C22 20.2652 21.8947 20.5195 21.7071 20.7071C21.5196 20.8946 21.2652 21 21 21H17V19ZM10.2 12L13 16H10.6L9.00002 13.714L7.40002 16H5.00002L7.80002 12L5.00002 7.99997H7.40002L9.00002 10.286L10.6 7.99997H13L10.2 12Z\"\n});\n\nfunction SvgToexcel(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgToexcel);\nexport default __webpack_public_path__ + \"static/media/toexcel.3e3b3355.svg\";\nexport { ForwardRef as ReactComponent };","import { useStores } from 'hooks';\r\nimport { observer } from 'mobx-react';\r\nimport React, { HTMLAttributes, useEffect } from 'react';\r\n\r\nimport Button from 'components/Button';\r\nimport Checkbox from 'components/Checkbox';\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader } from '../Modal';\r\nimport ModalFilter from './components/ModalFilter';\r\nimport SearchCluster from './components/SearchCluster';\r\nimport Type from './components/Type';\r\n\r\nimport { ReactComponent as ExcelIcon } from 'assets/icons/toexcel.svg';\r\n\r\nimport * as modalNames from '../constants/modalNames';\r\n\r\nimport styles from './DetailedCluster.module.scss';\r\n\r\ninterface IDetailedClusterProps extends HTMLAttributes<HTMLDivElement> {\r\n  clusterId: string;\r\n  onClose: () => void;\r\n}\r\n\r\nconst DetailedCluster = observer(({ clusterId, onClose }: IDetailedClusterProps) => {\r\n  const {\r\n    commonStore: { setSearchCluster, appTheme },\r\n    graphStore: { previouslyFetchedGraphId, ableEdit, visibleNodes, getExportCluster },\r\n    clusterStore: {\r\n      showLinksBetweenTaxpayers,\r\n      selectedTaxpayers,\r\n      changeShowLinksBetweenTaxpayers,\r\n      getClusterData,\r\n      getClusterTaxpayers,\r\n      clusterData,\r\n      setClusterFilters,\r\n      checkAll,\r\n      allIsChecked,\r\n    },\r\n    modalStore: { closeModal },\r\n  } = useStores();\r\n\r\n  const types = clusterData?.types;\r\n\r\n  const hasLinks = types && types.reduce((acc, type) => (acc += type.links_count), 0);\r\n\r\n  useEffect(() => {\r\n    setSearchCluster('');\r\n    getClusterData(clusterId);\r\n    getClusterTaxpayers(clusterId);\r\n  }, []);\r\n\r\n  const exportToExcel = () => {\r\n    let dateTime = new Date().toLocaleString().replaceAll(',', '');\r\n    let docTitle = 'Табличное представление кластера от ' + dateTime + '.xlsx';\r\n\r\n    getExportCluster(clusterId, docTitle);\r\n  };\r\n\r\n  const onFilter = async () => {\r\n    await setClusterFilters(clusterData?.cluster_index || 0);\r\n    closeModal(modalNames.DETAILED_CLUSTER_MODAL);\r\n  };\r\n\r\n  return (\r\n    <Modal>\r\n      <ModalHeader onClose={onClose}>\r\n        <div className={styles.header}>\r\n          <span>Детализация кластера</span>\r\n        </div>\r\n      </ModalHeader>\r\n\r\n      <ModalBody withFooter={true}>\r\n        <div className={styles.container}>\r\n          <div className={styles.search}>\r\n            <SearchCluster graphId={previouslyFetchedGraphId} origId={clusterId} />\r\n          </div>\r\n\r\n          <div className={styles.actions}>\r\n            <div className={styles.actions__line}>\r\n              <Checkbox\r\n                className={styles.checkbox}\r\n                onChange={changeShowLinksBetweenTaxpayers}\r\n                disabled={selectedTaxpayers.length < 2}\r\n                checked={showLinksBetweenTaxpayers}\r\n                title={\r\n                  selectedTaxpayers.length < 2\r\n                    ? 'Доступно только при выборе нескольких НП в строке поиска'\r\n                    : undefined\r\n                }\r\n              >\r\n                Показать связи с выбранными НП\r\n              </Checkbox>\r\n\r\n              <div className={styles.export} onClick={exportToExcel}>\r\n                Экспорт в Excel <ExcelIcon />\r\n              </div>\r\n            </div>\r\n\r\n            <div className={styles.actions__line}>\r\n              <Checkbox\r\n                className={styles.checkbox}\r\n                onChange={() => checkAll(!allIsChecked)}\r\n                checked={allIsChecked}\r\n              >\r\n                Отобразить все связи\r\n              </Checkbox>\r\n            </div>\r\n          </div>\r\n\r\n          {types && (\r\n            <div className={styles.types}>\r\n              {types.map((type) => {\r\n                return (\r\n                  type?.subtypes?.length > 0 && (\r\n                    <Type key={`cluster_type_${type.type_id}`} type={type} />\r\n                  )\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {!hasLinks && (\r\n            <span className={styles.noResults}>\r\n              Подходящих связей не найдено, измените строку поиска\r\n            </span>\r\n          )}\r\n\r\n          {false && <ModalFilter onClose={onClose} />}\r\n        </div>\r\n      </ModalBody>\r\n\r\n      <ModalFooter>\r\n        <div className={styles.bottomBar}>\r\n          <Button mode=\"secondary\" onClick={onClose}>\r\n            Закрыть\r\n          </Button>\r\n\r\n          {ableEdit && !visibleNodes && <Button onClick={onFilter}>Применить фильтр</Button>}\r\n        </div>\r\n      </ModalFooter>\r\n    </Modal>\r\n  );\r\n});\r\n\r\nexport default DetailedCluster;\r\n","export { default } from './DetailedCluster';\r\n"],"sourceRoot":""}