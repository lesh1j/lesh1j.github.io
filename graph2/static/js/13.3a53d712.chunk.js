(this.webpackJsonpvsa=this.webpackJsonpvsa||[]).push([[13],{793:function(e,a,t){e.exports={wrapper:"AddNewNode_wrapper__3vF8L",loader:"AddNewNode_loader__32yO7",header:"AddNewNode_header__ADYBo",headerLabel:"AddNewNode_headerLabel__fukkg",close:"AddNewNode_close__2s0cF",search:"AddNewNode_search__2JyZt",list:"AddNewNode_list__25D7t",item:"AddNewNode_item__2Otbf",emptyContainer:"AddNewNode_emptyContainer__2eWne",emptyText:"AddNewNode_emptyText__3fIJ1",error:"AddNewNode_error__2Bpfh",errorText:"AddNewNode_errorText__18ecG",actions:"AddNewNode_actions__1m9Lq",action:"AddNewNode_action__1isnF",separateLine:"AddNewNode_separateLine__1_a4W",container:"AddNewNode_container__1G45R",button:"AddNewNode_button__3HrzT",apply:"AddNewNode_apply__3FOrr",label:"AddNewNode_label__3eseH"}},794:function(e,a,t){e.exports={wrapper:"Taxpayer_wrapper__2A3hn",main:"Taxpayer_main__2YILC",additional:"Taxpayer_additional__1bEBz",fadeIn:"Taxpayer_fadeIn__2oEMw",additionalData:"Taxpayer_additionalData__1vymC",additionalDataContainer:"Taxpayer_additionalDataContainer__3RRHV",inn:"Taxpayer_inn__2FZ1e",kpp:"Taxpayer_kpp__3RIj5",name:"Taxpayer_name__1GWlA",period:"Taxpayer_period__ww2j1",dataName:"Taxpayer_dataName__3vkh1",dataValue:"Taxpayer_dataValue__iTVFX",additionalButtonContainer:"Taxpayer_additionalButtonContainer__3UE8-",additionalButtonLabel:"Taxpayer_additionalButtonLabel__1rWrW",additionalInfoIcon:"Taxpayer_additionalInfoIcon__18mX5"}},989:function(e,a,t){"use strict";t.r(a);var o=t(4),n=t.n(o),r=t(7),d=t(8),i=t(10),l=t(5),s=t(15),c=t(14),p=t(0),_=t.n(p),m=t(793),u=t.n(m),h=t(84),N=t(794),v=t.n(N),f=function(e){Object(s.a)(t,e);var a=Object(c.a)(t);function t(){var e;Object(d.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={showAdditionalInfo:!1,hovered:!1},e.wrapperRef=_.a.createRef(),e.hoverTimeout=void 0,e.clickTimeout=void 0,e._collapseSection=function(){},e._expandSection=function(){},e._toggleShowAdditionalInfo=function(){e.setState({showAdditionalInfo:!e.state.showAdditionalInfo})},e._onHover=function(){clearTimeout(e.hoverTimeout),e.hoverTimeout=setTimeout((function(){e.setState({hovered:!0})}),300)},e._onUnHover=function(){clearTimeout(e.hoverTimeout),e.setState({hovered:!1})},e._onClick=function(){clearTimeout(e.clickTimeout),e.clickTimeout=setTimeout(e._toggleShowAdditionalInfo,300)},e._onDoubleClickNode=function(){clearTimeout(e.clickTimeout);var a=e.props;(0,a.onSelect)(a.taxpayer)},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props,a=e.taxpayer,t=e.wrapperStyle,o=(e.theme,this.state);o.hovered,o.showAdditionalInfo;return _.a.createElement("div",{className:"".concat(v.a.wrapper," ").concat(t),ref:this.wrapperRef,onDoubleClick:this._onDoubleClickNode,onMouseEnter:this._onHover,onMouseLeave:this._onUnHover,title:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u0434\u0432\u0430\u0436\u0434\u044b \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0443\u0437\u043b\u0430"},_.a.createElement("div",{className:v.a.main},_.a.createElement("span",{className:v.a.inn},a.inn),_.a.createElement("span",{className:v.a.kpp},a.kpp),_.a.createElement("span",{className:v.a.name},a.name),_.a.createElement("span",{className:v.a.period},"-")))}}]),t}(p.PureComponent);f.defaultProps={wrapperStyle:""};var w,y=f,b=t(21),T=t(192),k=t(9),S=t(19),x=t(16),g=t(168),E=Object(k.c)("commonStore","modalStore","graphStore","diagramStore")(w=Object(k.d)(w=function(e){Object(s.a)(t,e);var a=Object(c.a)(t);function t(){var e;Object(d.a)(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(e=a.call.apply(a,[this].concat(i))).state={searchValue:""},e._onCreateNode=function(){var a=Object(r.a)(n.a.mark((function a(t){var o,r,d,i,l,s,c,p,_,m,u,h;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.props,r=o.graphStore,d=o.modalStore,i=o.createLinkModeV3,l=o.modeLink,s=o.diagramStore,!i){a.next=6;break}!0,"FL"!==t.subject_type?("from"===l?(c=t,p=(null===s||void 0===s||null===(_=s.diagram)||void 0===_?void 0:_.selection.first()).data):(c=(null===s||void 0===s||null===(m=s.diagram)||void 0===m?void 0:m.selection.first()).data,p=t),!1,null===d||void 0===d||d.openModal(S.f,{fromNode:c,toNode:p,createLinkModeV3:!0,modeLink:l,isFL:!1})):(h=(null===s||void 0===s||null===(u=s.diagram)||void 0===u?void 0:u.selection.first()).data,!1,!0,!0,null===d||void 0===d||d.openModal(S.j,{taxpayer:t,isShow:!1,Handmade:!0,disabledINN:!0,createLinkModeV3:!0,modeLink:l,infoNodeModeV3:h})),a.next=15;break;case 6:if("FL"===t.subject_type){a.next=11;break}return a.next=9,r.createNode(t);case 9:a.next=15;break;case 11:!1,!0,!0,null===d||void 0===d||d.openModal(S.j,{taxpayer:t,isShow:!1,Handmade:!0,disabledINN:!0});case 15:e._onClose();case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e._onChange=function(a){(e.setState({searchValue:a}),0===a.length)&&e.props.commonStore.resetNodesOrder()},e._onSearch=function(){var a=Object(l.a)(e),t=a.state.searchValue,o=a.props.commonStore;o.resetNodesOrder(),o.nodes.pending&&(x.a.source.cancel(),o.nodesPendingFalse()),t&&(o.searchNodesByText(t),o.nodesPendingTrue())},e._onClose=function(){var a=e.props,t=a.modalStore,o=a.commonStore;o.resetNodesOrder(),o.nodes.pending&&(x.a.source.cancel(),o.nodesPendingFalse()),t.closeModal(S.a)},e._onReset=function(){var a=e.props.commonStore;a.nodes.pending||(e.setState({searchValue:""}),a.resetNodesOrder())},e._onCreateIndividualPerson=function(){var a=e.props,t=a.modalStore,o=a.createLinkModeV3,n=a.modeLink,r=a.diagramStore;e._onClose();if(o){var d,i=(null===r||void 0===r||null===(d=r.diagram)||void 0===d?void 0:d.selection.first()).data;null===t||void 0===t||t.openModal(S.j,{Handmade:!0,createLinkModeV3:o,isFL:!0,modeLink:n,infoNodeModeV3:i})}else null===t||void 0===t||t.openModal(S.j,{Handmade:!0})},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state.searchValue,t=this.props.commonStore;return _.a.createElement("div",{className:u.a.wrapper},_.a.createElement("div",{className:u.a.header,"data-draggable":!0},_.a.createElement("span",{className:u.a.headerLabel,"data-draggable":!0},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0443\u0437\u0435\u043b"),_.a.createElement("div",{onClick:this._onClose},_.a.createElement(b.b,{className:u.a.close,name:"close",theme:t.appTheme}))),_.a.createElement("div",{className:u.a.separateLine}),_.a.createElement("div",{className:u.a.label},_.a.createElement("span",null,"\u041f\u043e\u0438\u0441\u043a \u044e\u0440\u0438\u0434\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0438 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u043b\u0438\u0446 (\u0418\u041d\u041d)"),_.a.createElement("span",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0443\u0437\u0435\u043b \u0424\u041b \u0432\u0440\u0443\u0447\u043d\u0443\u044e")),_.a.createElement("div",{className:u.a.container},_.a.createElement("div",null,_.a.createElement(h.a,{value:a,onChange:this._onChange,onSearch:this._onSearch,autoSearchTimeout:700,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0418\u041d\u041d \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430",autoFocus:!0,withButton:!0,theme:t.appTheme,wrapperStyle:u.a.search}),a.length>0&&(t.nodes.error||t.nodes.noResults?_.a.createElement("div",{className:u.a.error},_.a.createElement("span",{className:u.a.errorText},"\u041f\u043e\u0438\u0441\u043a \u043d\u0435 \u0434\u0430\u043b \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432")):t.nodes.pending?_.a.createElement("div",{className:u.a.loader},_.a.createElement(T.a,null)):_.a.createElement("ul",{className:u.a.list},t.nodes.order.map((function(a,o){return _.a.createElement("li",{key:"nodes-list-item"+o,className:u.a.item},_.a.createElement(y,{onSelect:e._onCreateNode,taxpayer:a,theme:null===t||void 0===t?void 0:t.appTheme}))}))))),_.a.createElement("div",{className:u.a.action},_.a.createElement(g.a,{label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0443\u0437\u0435\u043b \u0424\u041b",onClick:this._onCreateIndividualPerson,disabled:!t.nodes.noResults,buttonStyle:"".concat(u.a.button," ").concat(u.a.apply),title:t.nodes.noResults?"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 \u0444\u0438\u0437\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u043b\u0438\u0446\u0430 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0443\u0437\u043b\u0430":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0435\u0441\u043b\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0447\u0435\u0440\u0435\u0437 \u041f\u043e\u0438\u0441\u043a"}))))}}]),t}(p.PureComponent))||w)||w;t.d(a,"default",(function(){return E}))}}]);
//# sourceMappingURL=13.3a53d712.chunk.js.map