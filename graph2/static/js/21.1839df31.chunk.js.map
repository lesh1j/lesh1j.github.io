{"version":3,"sources":["components/modals/PickPeriod/PickPeriod.module.scss","components/modals/PickPeriod/PickPeriod.tsx","components/modals/PickPeriod/index.ts"],"names":["module","exports","PickPeriod","inject","observer","_onClose","modalStore","props","closePickPeriodModal","_onFilter","filterStore","periodDataFilter","parseCooperationDate","nds3_period_from","options","nds3_period_to","quarterFrom","quarterTo","yearFrom","yearTo","filter","_onReset","resetFilters","this","commonStore","graphStore","className","styles","wrapper","header","data-draggable","headerLabel","Icon","close","name","onClick","theme","appTheme","pickerContainer","data-tip","data-for","TimePeriodPicker","wrapperStyle","picker","fromQuarterValue","fromYearValue","toQuarterValue","toYearValue","onFromValueChange","changePeriodFrom","onToValueChange","changePeriodTo","quarters","QUARTERS","years","YEARS","label","disabled","interQuarterSearch","place","type","effect","backgroundColor","textColor","id","divTooltip","buttons","ActionButton","buttonStyle","button","React","PureComponent","defaultProps"],"mappings":"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","file":"static/js/21.1839df31.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"PickPeriod_wrapper__2nbXM\",\"header\":\"PickPeriod_header__39f7K\",\"headerLabel\":\"PickPeriod_headerLabel__3gXqE\",\"close\":\"PickPeriod_close__1K14h\",\"pickerContainer\":\"PickPeriod_pickerContainer__1S1PL\",\"buttons\":\"PickPeriod_buttons__Xz0Q9\",\"button\":\"PickPeriod_button__3P9Gq\",\"picker\":\"PickPeriod_picker__35LXe\",\"divTooltip\":\"PickPeriod_divTooltip__29jMX\"};","import React from 'react';\r\nimport { pickPeriodPropTypes } from './PickPeriod.props';\r\nimport styles from './PickPeriod.module.scss';\r\n\r\nimport { inject, observer } from 'mobx-react';\r\n\r\nimport TimePeriodPicker from '../../TimePeriodPicker';\r\nimport ActionButton from '../../ActionButton';\r\nimport Icon from '../../Icon';\r\n\r\nimport { YEARS, QUARTERS } from '../../constants';\r\n\r\nimport { parseCooperationDate } from '../../../utils/parseCooperationDate';\r\nimport { CommonStoreType } from 'stores/common/commonStore';\r\nimport { GraphStoreType } from '../../../stores/graph/graphStore';\r\nimport ReactTooltip from 'react-tooltip';\r\n\r\nexport interface PickPeriodProps {\r\n  periodDataFilter: any;\r\n  filterStore: any;\r\n  modalStore: any;\r\n  commonStore?: CommonStoreType;\r\n  graphStore?: GraphStoreType;\r\n}\r\n\r\n/** Компонент выбора периода */\r\n@inject('filterStore', 'modalStore', 'periodDataFilter', 'commonStore', 'graphStore')\r\n@observer\r\nclass PickPeriod extends React.PureComponent<PickPeriodProps> {\r\n  static propTypes = pickPeriodPropTypes;\r\n\r\n  static defaultProps = {\r\n    periodDataFilter: {\r\n      options: {},\r\n    },\r\n  };\r\n\r\n  _onClose = () => {\r\n    const { modalStore } = this.props;\r\n    modalStore?.closePickPeriodModal();\r\n  };\r\n\r\n  /**\r\n   * Метод фильтрации\r\n   */\r\n  _onFilter = (): void => {\r\n    const { filterStore } = this.props;\r\n\r\n    const { periodDataFilter } = this.props;\r\n    const { quarterFrom, quarterTo, yearFrom, yearTo } = parseCooperationDate({\r\n      nds3_period_from: periodDataFilter.options.nds3_period_from,\r\n      nds3_period_to: periodDataFilter.options.nds3_period_to,\r\n    });\r\n\r\n    if (!(yearFrom > yearTo || (quarterFrom > quarterTo && yearFrom === yearTo))) {\r\n      filterStore.filter();\r\n      this._onClose();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Метод сбрасывает настройки фильтров\r\n   */\r\n  _onReset = (): void => {\r\n    const { filterStore } = this.props;\r\n    filterStore.resetFilters();\r\n    this._onClose();\r\n  };\r\n\r\n  render() {\r\n    const { periodDataFilter, commonStore, graphStore } = this.props;\r\n\r\n    const { quarterFrom, quarterTo, yearFrom, yearTo } = parseCooperationDate({\r\n      nds3_period_from: periodDataFilter.options.nds3_period_from,\r\n      nds3_period_to: periodDataFilter.options.nds3_period_to,\r\n    });\r\n\r\n    return (\r\n      <div className={styles.wrapper}>\r\n        <div className={styles.header} data-draggable>\r\n          <h3 className={styles.headerLabel} data-draggable>\r\n            Выбор периода\r\n          </h3>\r\n          <Icon\r\n            className={styles.close}\r\n            name=\"close\"\r\n            onClick={this._onClose}\r\n            theme={commonStore?.appTheme}\r\n          />\r\n        </div>\r\n        <div\r\n          className={styles.pickerContainer}\r\n          data-tip={'React-tooltip'}\r\n          data-for={'pickPeriodToolTip'}\r\n        >\r\n          <TimePeriodPicker\r\n            wrapperStyle={styles.picker}\r\n            fromQuarterValue={quarterFrom}\r\n            fromYearValue={yearFrom}\r\n            toQuarterValue={quarterTo}\r\n            toYearValue={yearTo}\r\n            onFromValueChange={periodDataFilter.changePeriodFrom}\r\n            onToValueChange={periodDataFilter.changePeriodTo}\r\n            quarters={QUARTERS}\r\n            years={YEARS}\r\n            label={'Период учета данных'}\r\n            theme={commonStore?.appTheme}\r\n            disabled={graphStore?.interQuarterSearch}\r\n          />\r\n          {graphStore?.interQuarterSearch && (\r\n            <ReactTooltip\r\n              place=\"bottom\"\r\n              type=\"light\"\r\n              effect=\"float\"\r\n              backgroundColor={'#EDEDED'}\r\n              textColor={'#565656'}\r\n              id=\"pickPeriodToolTip\"\r\n            >\r\n              <div className={styles.divTooltip}>\r\n                Смена <b>периода учета данных</b> недоступна. Включен{' '}\r\n                <b>режим межквартального сопоставления</b>\r\n              </div>\r\n            </ReactTooltip>\r\n          )}\r\n        </div>\r\n        <div className={styles.buttons}>\r\n          <div data-tip={'React-tooltip'} data-for={'buttonToolTip'}>\r\n            <ActionButton\r\n              buttonStyle={styles.button}\r\n              label={'Применить'}\r\n              onClick={this._onFilter}\r\n              disabled={graphStore?.interQuarterSearch}\r\n            />\r\n            {graphStore?.interQuarterSearch && (\r\n              <ReactTooltip\r\n                place=\"bottom\"\r\n                type=\"light\"\r\n                effect=\"float\"\r\n                backgroundColor={'#EDEDED'}\r\n                textColor={'#565656'}\r\n                id=\"buttonToolTip\"\r\n              >\r\n                <div className={styles.divTooltip}>\r\n                  Смена <b>периода учета данных</b> недоступна. Включен{' '}\r\n                  <b>режим межквартального сопоставления</b>\r\n                </div>\r\n              </ReactTooltip>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PickPeriod;\r\n","export { default } from './PickPeriod';\r\n"],"sourceRoot":""}